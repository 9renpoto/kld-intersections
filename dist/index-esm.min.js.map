{"version":3,"file":"index-esm.min.js","sources":["../node_modules/kld-affine/lib/Point2D.js","../node_modules/kld-affine/lib/Vector2D.js","../node_modules/kld-affine/lib/Matrix2D.js","../node_modules/kld-affine/index.js","../node_modules/kld-polynomial/lib/Polynomial.js","../node_modules/kld-polynomial/lib/SqrtPolynomial.js","../node_modules/kld-polynomial/index.js","../lib/Intersection.js","../lib/IntersectionArgs.js","../lib/Shapes.js","../lib/AffineShapes.js","../lib/IntersectionQuery.js"],"sourcesContent":["/**\n *\n *   Point2D.js\n *\n *   copyright 2001-2002, 2013, 2017 Kevin Lindsey\n *\n */\n\n/**\n *  Point2D\n *\n *  @param {Number} x\n *  @param {Number} y\n *  @returns {Point2D}\n */\nfunction Point2D(x, y) {\n    Object.defineProperties(this, {\n        \"x\": {\n            value: x !== undefined ? x : 0.0,\n            writable: false,\n            enumerable: true,\n            configurable: false\n        },\n        \"y\": {\n            value: y !== undefined ? y : 0.0,\n            writable: false,\n            enumerable: true,\n            configurable: false\n        }\n    });\n}\n\n/**\n *  clone\n *\n *  @returns {Point2D}\n */\nPoint2D.prototype.clone = function() {\n    return new this.constructor(this.x, this.y);\n};\n\n/**\n *  add\n *\n *  @param {Point2D|Vector2D} that\n *  @returns {Point2D}\n */\nPoint2D.prototype.add = function(that) {\n    return new this.constructor(this.x+that.x, this.y+that.y);\n};\n\n/**\n *  subtract\n *\n *  @param { Vector2D | Point2D } that\n *  @returns {Point2D}\n */\nPoint2D.prototype.subtract = function(that) {\n    return new this.constructor(this.x-that.x, this.y-that.y);\n};\n\n/**\n *  multiply\n *\n *  @param {Number} scalar\n *  @returns {Point2D}\n */\nPoint2D.prototype.multiply = function(scalar) {\n    return new this.constructor(this.x*scalar, this.y*scalar);\n};\n\n/**\n *  divide\n *\n *  @param {Number} scalar\n *  @returns {Point2D}\n */\nPoint2D.prototype.divide = function(scalar) {\n    return new this.constructor(this.x/scalar, this.y/scalar);\n};\n\n/**\n *  equals\n *\n *  @param {Point2D} that\n *  @returns {Boolean}\n */\nPoint2D.prototype.equals = function(that) {\n    return ( this.x === that.x && this.y === that.y );\n};\n\n/**\n *  precisionEquals\n *\n *  @param {Point2D} that\n *  @param {Number} precision\n *  @returns {Boolean}\n */\nPoint2D.prototype.precisionEquals = function(that, precision) {\n    return (\n        Math.abs(this.x - that.x) < precision &&\n        Math.abs(this.y - that.y) < precision\n    );\n};\n\n// utility methods\n\n/**\n *  lerp\n *\n *  @param { Vector2D | Point2D } that\n *  @param {Number} t\n @  @returns {Point2D}\n */\nPoint2D.prototype.lerp = function(that, t) {\n    var omt = 1.0 - t;\n\n    return new this.constructor(\n        this.x * omt + that.x * t,\n        this.y * omt + that.y * t\n    );\n};\n\n/**\n *  distanceFrom\n *\n *  @param {Point2D} that\n *  @returns {Number}\n */\nPoint2D.prototype.distanceFrom = function(that) {\n    var dx = this.x - that.x;\n    var dy = this.y - that.y;\n\n    return Math.sqrt(dx*dx + dy*dy);\n};\n\n/**\n *  min\n *\n *  @param {Point2D} that\n *  @returns {Number}\n */\nPoint2D.prototype.min = function(that) {\n    return new this.constructor(\n        Math.min( this.x, that.x ),\n        Math.min( this.y, that.y )\n    );\n};\n\n/**\n *  max\n *\n *  @param {Point2D} that\n *  @returns {Number}\n */\nPoint2D.prototype.max = function(that) {\n    return new this.constructor(\n        Math.max( this.x, that.x ),\n        Math.max( this.y, that.y )\n    );\n};\n\n/**\n *  transform\n *\n *  @param {Matrix2D}\n *  @result {Point2D}\n */\nPoint2D.prototype.transform = function(matrix) {\n    return new this.constructor(\n        matrix.a * this.x + matrix.c * this.y + matrix.e,\n        matrix.b * this.x + matrix.d * this.y + matrix.f\n    );\n};\n\n/**\n *  toString\n *\n *  @returns {String}\n */\nPoint2D.prototype.toString = function() {\n    return \"point(\" + this.x + \",\" + this.y + \")\";\n};\n\nif (typeof module !== \"undefined\") {\n    module.exports = Point2D;\n}\n","/**\n *\n *   Vector2D.js\n *\n *   copyright 2001-2002, 2013, 2017 Kevin Lindsey\n *\n */\n\n/**\n *  Vector2D\n *\n *  @param {Number} x\n *  @param {Number} y\n *  @returns {Vector2D}\n */\nfunction Vector2D(x, y) {\n    Object.defineProperties(this, {\n        \"x\": {\n            value: x !== undefined ? x : 0.0,\n            writable: false,\n            enumerable: true,\n            configurable: false\n        },\n        \"y\": {\n            value: y !== undefined ? y : 0.0,\n            writable: false,\n            enumerable: true,\n            configurable: false\n        }\n    });\n}\n\n/**\n *  fromPoints\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @returns {Vector2D}\n */\nVector2D.fromPoints = function(p1, p2) {\n    return new Vector2D(\n        p2.x - p1.x,\n        p2.y - p1.y\n    );\n};\n\n/**\n *  length\n *\n *  @returns {Number}\n */\nVector2D.prototype.length = function() {\n    return Math.sqrt(this.x*this.x + this.y*this.y);\n};\n\n/**\n *  magnitude\n *\n *  @returns {Number}\n */\nVector2D.prototype.magnitude = function() {\n    return this.x*this.x + this.y*this.y;\n};\n\n/**\n *  dot\n *\n *  @param {Vector2D} that\n *  @returns {Number}\n */\nVector2D.prototype.dot = function(that) {\n    return this.x*that.x + this.y*that.y;\n};\n\n/**\n *  cross\n *\n *  @param {Vector2D} that\n *  @returns {Number}\n */\nVector2D.prototype.cross = function(that) {\n    return this.x*that.y - this.y*that.x;\n};\n\n/**\n *  determinant\n *\n *  @param {Vector2D} that\n *  @returns {Number}\n */\nVector2D.prototype.determinant = function(that) {\n    return this.x*that.y - this.y*that.x;\n};\n\n/**\n *  unit\n *\n *  @returns {Vector2D}\n */\nVector2D.prototype.unit = function() {\n    return this.divide( this.length() );\n};\n\n/**\n *  add\n *\n *  @param {Vector2D} that\n *  @returns {Vector2D}\n */\nVector2D.prototype.add = function(that) {\n    return new this.constructor(this.x + that.x, this.y + that.y);\n};\n\n/**\n *  subtract\n *\n *  @param {Vector2D} that\n *  @returns {Vector2D}\n */\nVector2D.prototype.subtract = function(that) {\n    return new this.constructor(this.x - that.x, this.y - that.y);\n};\n\n/**\n *  multiply\n *\n *  @param {Number} scalar\n *  @returns {Vector2D}\n */\nVector2D.prototype.multiply = function(scalar) {\n    return new this.constructor(this.x * scalar, this.y * scalar);\n};\n\n/**\n *  divide\n *\n *  @param {Number} scalar\n *  @returns {Vector2D}\n */\nVector2D.prototype.divide = function(scalar) {\n    return new this.constructor(this.x / scalar, this.y / scalar);\n};\n\n/**\n *  angleBetween\n *\n *  @param {Vector2D} that\n *  @returns {Number}\n */\nVector2D.prototype.angleBetween = function(that) {\n    var cos = this.dot(that) / (this.length() * that.length());\n    cos = Math.max(-1, Math.min(cos, 1));\n    var radians = Math.acos(cos);\n\n    return (this.cross(that) < 0.0) ? -radians : radians;\n};\n\n/**\n *  Find a vector is that is perpendicular to this vector\n *\n *  @returns {Vector2D}\n */\nVector2D.prototype.perp = function() {\n    return new this.constructor(-this.y, this.x);\n};\n\n/**\n *  Find the component of the specified vector that is perpendicular to\n *  this vector\n *\n *  @param {Vector2D} that\n *  @returns {Vector2D}\n */\nVector2D.prototype.perpendicular = function(that) {\n    return this.subtract(this.project(that));\n};\n\n/**\n *  project\n *\n *  @param {Vector2D} that\n *  @returns {Vector2D}\n */\nVector2D.prototype.project = function(that) {\n    var percent = this.dot(that) / that.dot(that);\n\n    return that.multiply(percent);\n};\n\n/**\n *  transform\n *\n *  @param {Matrix2D}\n *  @returns {Vector2D}\n */\nVector2D.prototype.transform = function(matrix) {\n    return new this.constructor(\n        matrix.a * this.x + matrix.c * this.y,\n        matrix.b * this.x + matrix.d * this.y\n    );\n};\n\n/**\n *  equals\n *\n *  @param {Vector2D} that\n *  @returns {Boolean}\n */\nVector2D.prototype.equals = function(that) {\n    return (\n        this.x === that.x &&\n        this.y === that.y\n    );\n};\n\n/**\n *  precisionEquals\n *\n *  @param {Vector2D} that\n *  @param {Number} precision\n *  @returns {Boolean}\n */\nVector2D.prototype.precisionEquals = function(that, precision) {\n    return (\n        Math.abs(this.x - that.x) < precision &&\n        Math.abs(this.y - that.y) < precision\n    );\n};\n\n/**\n *  toString\n *\n *  @returns {String}\n */\nVector2D.prototype.toString = function() {\n    return \"vector(\" + this.x + \",\" + this.y + \")\";\n};\n\nif (typeof module !== \"undefined\") {\n    module.exports = Vector2D;\n}\n","/**\n *   Matrix2D.js\n *\n *   copyright 2001-2002, 2013, 2017 Kevin Lindsey\n */\n\nfunction setReadonlyProperty(object, property, value) {\n    Object.defineProperty(object, property, {\n        value: value,\n        writable: false,\n        enumerable: true,\n        configurable: false\n    });\n}\n\n/**\n *  Identity matrix\n *\n *  @returns {Matrix2D}\n */\nsetReadonlyProperty(Matrix2D, \"IDENTITY\", new Matrix2D(1, 0, 0, 1, 0, 0));\nsetReadonlyProperty(Matrix2D.IDENTITY, \"isIdentity\", function () { return true; });\n\n\n/**\n *  Matrix2D\n *\n *  [a c e]\n *  [b d f]\n *  [0 0 1]\n *\n *  @param {Number} a\n *  @param {Number} b\n *  @param {Number} c\n *  @param {Number} d\n *  @param {Number} e\n *  @param {Number} f\n *  @returns {Matrix2D}\n */\nfunction Matrix2D(a, b, c, d, e, f) {\n    setReadonlyProperty(this, \"a\", (a !== undefined) ? a : 1);\n    setReadonlyProperty(this, \"b\", (b !== undefined) ? b : 0);\n    setReadonlyProperty(this, \"c\", (c !== undefined) ? c : 0);\n    setReadonlyProperty(this, \"d\", (d !== undefined) ? d : 1);\n    setReadonlyProperty(this, \"e\", (e !== undefined) ? e : 0);\n    setReadonlyProperty(this, \"f\", (f !== undefined) ? f : 0);\n}\n\n\n// *** STATIC METHODS\n\n/**\n *  translation\n *\n *  @param {Number} tx\n *  @param {Number} ty\n *  @returns {Matrix2D}\n */\nMatrix2D.translation = function(tx, ty) {\n    return new Matrix2D(1, 0, 0, 1, tx, ty);\n};\n\n/**\n *  scaling\n *\n *  @param {Number} scale\n *  @returns {Matrix2D}\n */\nMatrix2D.scaling = function(scale) {\n    return new Matrix2D(scale, 0, 0, scale, 0, 0);\n};\n\n/**\n *  scalingAt\n *\n *  @param {Number} scale\n *  @param {Point2D} center\n *  @returns {Matrix2D}\n */\nMatrix2D.scalingAt = function(scale, center) {\n    return new Matrix2D(\n        scale,\n        0,\n        0,\n        scale,\n        center.x - center.x * scale,\n        center.y - center.y * scale\n    );\n}\n\n\n/**\n *  nonUniformScaling\n *\n *  @param {Number} scaleX\n *  @param {Number} scaleY\n *  @returns {Matrix2D}\n */\nMatrix2D.nonUniformScaling = function(scaleX, scaleY) {\n    return new Matrix2D(scaleX, 0, 0, scaleY, 0, 0);\n};\n\n/**\n *  nonUniformScalingAt\n *\n *  @param {Number} scaleX\n *  @param {Number} scaleY\n *  @param {Point2D} center\n *  @returns {Matrix2D}\n */\nMatrix2D.nonUniformScalingAt = function(scaleX, scaleY, center) {\n    return new Matrix2D(\n        scaleX,\n        0,\n        0,\n        scaleY,\n        center.x - center.x * scaleX,\n        center.y - center.y * scaleY\n    );\n};\n\n/**\n *  rotation\n *\n *  @param {Number} radians\n *  @returns {Matrix2D}\n */\nMatrix2D.rotation = function(radians) {\n    let c = Math.cos(radians);\n    let s = Math.sin(radians);\n\n    return new Matrix2D(c, s, -s, c, 0, 0);\n};\n\n/**\n *  rotationAt\n *\n *  @param {Number} radians\n *  @param {Point2D} center\n *  @returns {Matrix2D}\n */\nMatrix2D.rotationAt = function(radians, center) {\n    let c = Math.cos(radians);\n    let s = Math.sin(radians);\n\n    return new Matrix2D(\n        c,\n        s,\n        -s,\n        c,\n        center.x - center.x * c + center.y * s,\n        center.y - center.y * c - center.x * s\n    );\n};\n\n/**\n *  rotationFromVector\n *\n *  @param {Vector2D}\n *  @returns {Matrix2D}\n */\nMatrix2D.rotationFromVector = function(vector) {\n    var unit = vector.unit();\n    var c = unit.x; // cos\n    var s = unit.y; // sin\n\n    return new Matrix2D(c, s, -s, c, 0, 0);\n};\n\n/**\n *  xFlip\n *\n *  @returns {Matrix2D}\n */\nMatrix2D.xFlip = function() {\n    return new Matrix2D(-1, 0, 0, 1, 0, 0);\n};\n\n/**\n *  yFlip\n *\n *  @returns {Matrix2D}\n */\nMatrix2D.yFlip = function() {\n    return new Matrix2D(1, 0, 0, -1, 0, 0);\n};\n\n/**\n *  xSkew\n *\n *  @param {Number} radians\n *  @returns {Matrix2D}\n */\nMatrix2D.xSkew = function(radians) {\n    var t = Math.tan(radians);\n\n    return new Matrix2D(1, 0, t, 1, 0, 0);\n};\n\n/**\n *  ySkew\n *\n *  @param {Number} radians\n *  @returns {Matrix2D}\n */\nMatrix2D.ySkew = function(radians) {\n    var t = Math.tan(radians);\n\n    return new Matrix2D(1, t, 0, 1, 0, 0);\n};\n\n\n// *** METHODS\n\n/**\n *  multiply\n *\n *  @pararm {Matrix2D} that\n *  @returns {Matrix2D}\n */\nMatrix2D.prototype.multiply = function (that) {\n    if (this.isIdentity()) {\n        return that;\n    }\n\n    if (that.isIdentity()) {\n        return this;\n    }\n\n    return new this.constructor(\n        this.a * that.a + this.c * that.b,\n        this.b * that.a + this.d * that.b,\n        this.a * that.c + this.c * that.d,\n        this.b * that.c + this.d * that.d,\n        this.a * that.e + this.c * that.f + this.e,\n        this.b * that.e + this.d * that.f + this.f\n    );\n};\n\n/**\n *  inverse\n *\n *  @returns {Matrix2D}\n */\nMatrix2D.prototype.inverse = function () {\n    if (this.isIdentity()) {\n        return this;\n    }\n\n    var det1 = this.a * this.d - this.b * this.c;\n\n    if ( det1 === 0.0 ) {\n        throw(\"Matrix is not invertible\");\n    }\n\n    var idet = 1.0 / det1;\n    var det2 = this.f * this.c - this.e * this.d;\n    var det3 = this.e * this.b - this.f * this.a;\n\n    return new this.constructor(\n        this.d * idet,\n       -this.b * idet,\n       -this.c * idet,\n        this.a * idet,\n          det2 * idet,\n          det3 * idet\n    );\n};\n\n/**\n *  translate\n *\n *  @param {Number} tx\n *  @param {Number} ty\n *  @returns {Matrix2D}\n */\nMatrix2D.prototype.translate = function(tx, ty) {\n    return new this.constructor(\n        this.a,\n        this.b,\n        this.c,\n        this.d,\n        this.a * tx + this.c * ty + this.e,\n        this.b * tx + this.d * ty + this.f\n    );\n};\n\n/**\n *  scale\n *\n *  @param {Number} scale\n *  @returns {Matrix2D}\n */\nMatrix2D.prototype.scale = function(scale) {\n    return new this.constructor(\n        this.a * scale,\n        this.b * scale,\n        this.c * scale,\n        this.d * scale,\n        this.e,\n        this.f\n    );\n};\n\n/**\n *  scaleAt\n *\n *  @param {Number} scale\n *  @param {Point2D} center\n *  @returns {Matrix2D}\n */\nMatrix2D.prototype.scaleAt = function(scale, center) {\n    var dx = center.x - scale * center.x;\n    var dy = center.y - scale * center.y;\n\n    return new this.constructor(\n        this.a * scale,\n        this.b * scale,\n        this.c * scale,\n        this.d * scale,\n        this.a * dx + this.c * dy + this.e,\n        this.b * dx + this.d * dy + this.f\n    );\n};\n\n/**\n *  scaleNonUniform\n *\n *  @param {Number} scaleX\n *  @param {Number} scaleY\n *  @returns {Matrix2D}\n */\nMatrix2D.prototype.scaleNonUniform = function(scaleX, scaleY) {\n    return new this.constructor(\n        this.a * scaleX,\n        this.b * scaleX,\n        this.c * scaleY,\n        this.d * scaleY,\n        this.e,\n        this.f\n    );\n};\n\n/**\n *  scaleNonUniformAt\n *\n *  @param {Number} scaleX\n *  @param {Number} scaleY\n *  @param {Point2D} center\n *  @returns {Matrix2D}\n */\nMatrix2D.prototype.scaleNonUniformAt = function(scaleX, scaleY, center) {\n    var dx = center.x - scaleX * center.x;\n    var dy = center.y - scaleY * center.y;\n\n    return new this.constructor(\n        this.a * scaleX,\n        this.b * scaleX,\n        this.c * scaleY,\n        this.d * scaleY,\n        this.a * dx + this.c * dy + this.e,\n        this.b * dx + this.d * dy + this.f\n    );\n};\n\n/**\n *  rotate\n *\n *  @param {Number} radians\n *  @returns {Matrix2D}\n */\nMatrix2D.prototype.rotate = function(radians) {\n    var c = Math.cos(radians);\n    var s = Math.sin(radians);\n\n    return new this.constructor(\n        this.a *  c + this.c * s,\n        this.b *  c + this.d * s,\n        this.a * -s + this.c * c,\n        this.b * -s + this.d * c,\n        this.e,\n        this.f\n    );\n};\n\n/**\n *  rotateAt\n *\n *  @param {Number} radians\n *  @param {Point2D} center\n *  @result {Matrix2D}\n */\nMatrix2D.prototype.rotateAt = function(radians, center) {\n    var cos = Math.cos(radians);\n    var sin = Math.sin(radians);\n    var cx = center.x;\n    var cy = center.y;\n\n    var a = this.a * cos + this.c * sin;\n    var b = this.b * cos + this.d * sin;\n    var c = this.c * cos - this.a * sin;\n    var d = this.d * cos - this.b * sin;\n\n    return new this.constructor(\n        a,\n        b,\n        c,\n        d,\n        (this.a - a) * cx + (this.c - c) * cy + this.e,\n        (this.b - b) * cx + (this.d - d) * cy + this.f\n    );\n};\n\n/**\n *  rotateFromVector\n *\n *  @param {Vector2D}\n *  @returns {Matrix2D}\n */\nMatrix2D.prototype.rotateFromVector = function(vector) {\n    var unit = vector.unit();\n    var c = unit.x; // cos\n    var s = unit.y; // sin\n\n    return new this.constructor(\n        this.a *  c + this.c * s,\n        this.b *  c + this.d * s,\n        this.a * -s + this.c * c,\n        this.b * -s + this.d * c,\n        this.e,\n        this.f\n    );\n};\n\n/**\n *  flipX\n *\n *  @returns {Matrix2D}\n */\nMatrix2D.prototype.flipX = function() {\n    return new this.constructor(\n        -this.a,\n        -this.b,\n         this.c,\n         this.d,\n         this.e,\n         this.f\n    );\n};\n\n/**\n *  flipY\n *\n *  @returns {Matrix2D}\n */\nMatrix2D.prototype.flipY = function() {\n    return new this.constructor(\n         this.a,\n         this.b,\n        -this.c,\n        -this.d,\n         this.e,\n         this.f\n    );\n};\n\n/**\n *  skewX\n *\n *  @pararm {Number} radians\n *  @returns {Matrix2D}\n */\nMatrix2D.prototype.skewX = function(radians) {\n    var t = Math.tan(radians);\n\n    return new this.constructor(\n        this.a,\n        this.b,\n        this.c + this.a * t,\n        this.d + this.b * t,\n        this.e,\n        this.f\n    );\n};\n\n// TODO: skewXAt\n\n/**\n *  skewY\n *\n *  @pararm {Number} radians\n *  @returns {Matrix2D}\n */\nMatrix2D.prototype.skewY = function(radians) {\n    var t = Math.tan(radians);\n\n    return new this.constructor(\n        this.a + this.c * t,\n        this.b + this.d * t,\n        this.c,\n        this.d,\n        this.e,\n        this.f\n    );\n};\n\n// TODO: skewYAt\n\n/**\n *  isIdentity\n *\n *  @returns {Boolean}\n */\nMatrix2D.prototype.isIdentity = function() {\n    return (\n        this.a === 1.0 &&\n        this.b === 0.0 &&\n        this.c === 0.0 &&\n        this.d === 1.0 &&\n        this.e === 0.0 &&\n        this.f === 0.0\n    );\n};\n\n/**\n *  isInvertible\n *\n *  @returns {Boolean}\n */\nMatrix2D.prototype.isInvertible = function() {\n    return this.a * this.d - this.b * this.c !== 0.0;\n};\n\n/**\n *  getScale\n *\n *  @returns {{ scaleX: Number, scaleY: Number }}\n */\nMatrix2D.prototype.getScale = function() {\n    return {\n        scaleX: Math.sqrt(this.a * this.a + this.c * this.c),\n        scaleY: Math.sqrt(this.b * this.b + this.d * this.d)\n    };\n};\n\n/**\n *  getDecomposition\n *\n *  Calculates matrix Singular Value Decomposition\n *\n *  The resulting matrices, translation, rotation, scale, and rotation0, return\n *  this matrix when they are muliplied together in the listed order\n *\n *  @see Jim Blinn's article {@link http://dx.doi.org/10.1109/38.486688}\n *  @see {@link http://math.stackexchange.com/questions/861674/decompose-a-2d-arbitrary-transform-into-only-scaling-and-rotation}\n *\n *  @returns {{ translation: Matrix2D, rotation: Matrix2D, scale: Matrix2D, rotation0: Matrix2D }}\n */\nMatrix2D.prototype.getDecomposition = function () {\n    var E      = (this.a + this.d) * 0.5;\n    var F      = (this.a - this.d) * 0.5;\n    var G      = (this.b + this.c) * 0.5;\n    var H      = (this.b - this.c) * 0.5;\n\n    var Q      = Math.sqrt(E * E + H * H);\n    var R      = Math.sqrt(F * F + G * G);\n    var scaleX = Q + R;\n    var scaleY = Q - R;\n\n    var a1     = Math.atan2(G, F);\n    var a2     = Math.atan2(H, E);\n    var theta  = (a2 - a1) * 0.5;\n    var phi    = (a2 + a1) * 0.5;\n\n    // TODO: Add static methods to generate translation, rotation, etc.\n    // matrices directly\n\n    return {\n        translation: new this.constructor(1, 0, 0, 1, this.e, this.f),\n        rotation:    this.constructor.IDENTITY.rotate(phi),\n        scale:       new this.constructor(scaleX, 0, 0, scaleY, 0, 0),\n        rotation0:   this.constructor.IDENTITY.rotate(theta)\n    };\n};\n\n/**\n *  equals\n *\n *  @param {Matrix2D} that\n *  @returns {Boolean}\n */\nMatrix2D.prototype.equals = function(that) {\n    return (\n        this.a === that.a &&\n        this.b === that.b &&\n        this.c === that.c &&\n        this.d === that.d &&\n        this.e === that.e &&\n        this.f === that.f\n    );\n};\n\n/**\n *  precisionEquals\n *\n *  @param {Matrix2D} that\n *  @param {Number} precision\n *  @returns {Boolean}\n */\nMatrix2D.prototype.precisionEquals = function(that, precision) {\n    return (\n        Math.abs(this.a - that.a) < precision &&\n        Math.abs(this.b - that.b) < precision &&\n        Math.abs(this.c - that.c) < precision &&\n        Math.abs(this.d - that.d) < precision &&\n        Math.abs(this.e - that.e) < precision &&\n        Math.abs(this.f - that.f) < precision\n    );\n};\n\n/**\n *  toString\n *\n *  @returns {String}\n */\nMatrix2D.prototype.toString = function() {\n    return \"matrix(\" + [this.a, this.b, this.c, this.d, this.e, this.f].join(\",\") + \")\";\n};\n\nif (typeof module !== \"undefined\") {\n    module.exports = Matrix2D;\n}\n","// expose classes\n\nexports.Point2D = require('./lib/Point2D');\nexports.Vector2D = require('./lib/Vector2D');\nexports.Matrix2D = require('./lib/Matrix2D');\n","/**\n *\n *   Polynomial.js\n *\n *   copyright 2002, 2013 Kevin Lindsey\n * \n *   contribution {@link http://github.com/Quazistax/kld-polynomial}\n *       @copyright 2015 Robert Benko (Quazistax) <quazistax@gmail.com>\n *       @license MIT\n */\n\nPolynomial.TOLERANCE = 1e-6;\nPolynomial.ACCURACY  = 15;\n\n\n/**\n *  interpolate\n *\n *  Based on poloint in \"Numerical Recipes in C, 2nd Edition\", pages 109-110\n *\n *  @param {Array<Number>} xs\n *  @param {Array<Number>} ys\n *  @param {Number} n\n *  @param {Number} offset\n *  @param {Number} x\n *\n *  @returns {{y: Number, dy: Number}}\n */\nPolynomial.interpolate = function(xs, ys, n, offset, x) {\n    if ( xs.constructor !== Array || ys.constructor !== Array ) {\n        throw new Error(\"Polynomial.interpolate: xs and ys must be arrays\");\n    }\n    if ( isNaN(n) || isNaN(offset) || isNaN(x) ) {\n        throw new Error(\"Polynomial.interpolate: n, offset, and x must be numbers\");\n    }\n\n    var y  = 0;\n    var dy = 0;\n    var c = new Array(n);\n    var d = new Array(n);\n    var ns = 0;\n\n    var diff = Math.abs(x - xs[offset]);\n\n    for ( var i = 0; i < n; i++ ) {\n        var dift = Math.abs(x - xs[offset+i]);\n\n        if ( dift < diff ) {\n            ns = i;\n            diff = dift;\n        }\n        c[i] = d[i] = ys[offset+i];\n    }\n\n    y = ys[offset+ns];\n    ns--;\n\n    for ( var m = 1; m < n; m++ ) {\n        for ( var i = 0; i < n-m; i++ ) {\n            var ho = xs[offset+i] - x;\n            var hp = xs[offset+i+m] - x;\n            var w = c[i+1]-d[i];\n            var den = ho - hp;\n\n            if ( den == 0.0 ) {\n                throw new Error(\"Unable to interpolate polynomial. Two numbers in n were identical (to within roundoff)\");\n            }\n\n            den = w / den;\n            d[i] = hp*den;\n            c[i] = ho*den;\n        }\n\n        dy = (2*(ns+1) < (n-m)) ? c[ns+1] : d[ns--];\n        y += dy;\n    }\n\n    return { y: y, dy: dy };\n};\n\n\n/**\n *  Polynomial\n *\n *  @returns {Polynomial}\n */\nfunction Polynomial() {\n    this.init( arguments );\n}\n\n\n/**\n *  init\n */\nPolynomial.prototype.init = function(coefs) {\n    this.coefs = new Array();\n\n    for ( var i = coefs.length - 1; i >= 0; i-- )\n        this.coefs.push( coefs[i] );\n\n    this._variable = \"t\";\n    this._s = 0;\n};\n\n\n/**\n *  eval\n */\nPolynomial.prototype.eval = function(x) {\n    if ( isNaN(x) ) {\n        throw new Error(\"Polynomial.eval: parameter must be a number\");\n    }\n\n    var result = 0;\n\n    for ( var i = this.coefs.length - 1; i >= 0; i-- ) {\n        result = result * x + this.coefs[i];\n    }\n\n    return result;\n};\n\n\n/**\n *  add\n */\nPolynomial.prototype.add = function(that) {\n    var result = new Polynomial();\n    var d1 = this.getDegree();\n    var d2 = that.getDegree();\n    var dmax = Math.max(d1,d2);\n\n    for ( var i = 0; i <= dmax; i++ ) {\n        var v1 = (i <= d1) ? this.coefs[i] : 0;\n        var v2 = (i <= d2) ? that.coefs[i] : 0;\n\n        result.coefs[i] = v1 + v2;\n    }\n\n    return result;\n};\n\n\n/**\n *  multiply\n */\nPolynomial.prototype.multiply = function(that) {\n    var result = new Polynomial();\n\n    for ( var i = 0; i <= this.getDegree() + that.getDegree(); i++ ) {\n        result.coefs.push(0);\n    }\n\n    for ( var i = 0; i <= this.getDegree(); i++ ) {\n        for ( var j = 0; j <= that.getDegree(); j++ ) {\n            result.coefs[i+j] += this.coefs[i] * that.coefs[j];\n        }\n    }\n\n    return result;\n};\n\n\n/**\n *  divide_scalar\n */\nPolynomial.prototype.divide_scalar = function(scalar) {\n    for ( var i = 0; i < this.coefs.length; i++ ) {\n        this.coefs[i] /= scalar;\n    }\n};\n\n\n/**\n *  simplify\n */\nPolynomial.prototype.simplify = function(TOLERANCE) {\n    if (TOLERANCE === undefined) TOLERANCE = 1e-12;\n\n    for ( var i = this.getDegree(); i >= 0; i-- ) {\n        if ( Math.abs( this.coefs[i] ) <= TOLERANCE ) {\n            this.coefs.pop();\n        }\n        else {\n            break;\n        }\n    }\n};\n\n\n/**\n *  bisection\n */\nPolynomial.prototype.bisection = function(min, max) {\n    var minValue = this.eval(min);\n    var maxValue = this.eval(max);\n    var result;\n\n    if ( Math.abs(minValue) <= Polynomial.TOLERANCE ) {\n        result = min;\n    }\n    else if ( Math.abs(maxValue) <= Polynomial.TOLERANCE ) {\n        result = max;\n    }\n    else if ( minValue * maxValue <= 0 ) {\n        var tmp1  = Math.log(max - min);\n        var tmp2  = Math.LN10 * Polynomial.ACCURACY;\n        var iters = Math.ceil( (tmp1+tmp2) / Math.LN2 );\n\n        for ( var i = 0; i < iters; i++ ) {\n            result = 0.5 * (min + max);\n            var value = this.eval(result);\n\n            if ( Math.abs(value) <= Polynomial.TOLERANCE ) {\n                break;\n            }\n\n            if ( value * minValue < 0 ) {\n                max = result;\n                maxValue = value;\n            }\n            else {\n                min = result;\n                minValue = value;\n            }\n        }\n    }\n\n    return result;\n};\n\n\n/**\n *  toString\n */\nPolynomial.prototype.toString = function() {\n    var coefs = new Array();\n    var signs = new Array();\n\n    for ( var i = this.coefs.length - 1; i >= 0; i-- ) {\n        var value = Math.round(this.coefs[i]*1000)/1000;\n        //var value = this.coefs[i];\n\n        if ( value != 0 ) {\n            var sign = ( value < 0 ) ? \" - \" : \" + \";\n\n            value = Math.abs(value);\n\n            if ( i > 0 ) {\n                if ( value == 1 ) {\n                    value = this._variable;\n                }\n                else {\n                    value += this._variable;\n                }\n            }\n\n            if ( i > 1 ) {\n                value += \"^\" + i;\n            }\n\n            signs.push( sign );\n            coefs.push( value );\n        }\n    }\n\n    signs[0] = ( signs[0] == \" + \" ) ? \"\" : \"-\";\n\n    var result = \"\";\n\n    for ( var i = 0; i < coefs.length; i++ ) {\n        result += signs[i] + coefs[i];\n    }\n\n    return result;\n};\n\n\n/**\n *  trapezoid\n *\n *  Based on trapzd in \"Numerical Recipes in C, 2nd Edition\", page 137\n */\nPolynomial.prototype.trapezoid = function(min, max, n) {\n    if ( isNaN(min) || isNaN(max) || isNaN(n) ) {\n        throw new Error(\"Polynomial.trapezoid: parameters must be numbers\");\n    }\n\n    var range = max - min;\n    var TOLERANCE = 1e-7;\n\n    if ( n == 1 ) {\n        var minValue = this.eval(min);\n        var maxValue = this.eval(max);\n\n        this._s = 0.5*range*( minValue + maxValue );\n    }\n    else {\n        var it = 1 << (n-2);\n        var delta = range / it;\n        var x = min + 0.5*delta;\n        var sum = 0;\n\n        for ( var i = 0; i < it; i++ ) {\n            sum += this.eval(x);\n            x += delta;\n        }\n\n        this._s = 0.5*(this._s + range*sum/it);\n    }\n\n    if ( isNaN(this._s) ) {\n        throw new Error(\"Polynomial.trapezoid: this._s is NaN\");\n    }\n\n    return this._s;\n};\n\n\n/**\n *  simpson\n *\n *  Based on trapzd in \"Numerical Recipes in C, 2nd Edition\", page 139\n */\nPolynomial.prototype.simpson = function(min, max) {\n    if ( isNaN(min) || isNaN(max) ) {\n        throw new Error(\"Polynomial.simpson: parameters must be numbers\");\n    }\n\n    var range = max - min;\n    var st = 0.5 * range * ( this.eval(min) + this.eval(max) );\n    var t = st;\n    var s = 4.0*st/3.0;\n    var os = s;\n    var ost = st;\n    var TOLERANCE = 1e-7;\n\n    var it = 1;\n\n    for ( var n = 2; n <= 20; n++ ) {\n        var delta = range / it;\n        var x     = min + 0.5*delta;\n        var sum   = 0;\n\n        for ( var i = 1; i <= it; i++ ) {\n            sum += this.eval(x);\n            x += delta;\n        }\n\n        t = 0.5 * (t + range * sum / it);\n        st = t;\n        s = (4.0*st - ost)/3.0;\n\n        if ( Math.abs(s-os) < TOLERANCE*Math.abs(os) ) {\n            break;\n        }\n\n        os = s;\n        ost = st;\n        it <<= 1;\n    }\n\n    return s;\n};\n\n\n/**\n *  romberg\n */\nPolynomial.prototype.romberg = function(min, max) {\n    if ( isNaN(min) || isNaN(max) ) {\n        throw new Error(\"Polynomial.romberg: parameters must be numbers\");\n    }\n\n    var MAX = 20;\n    var K = 3;\n    var TOLERANCE = 1e-6;\n    var s = new Array(MAX+1);\n    var h = new Array(MAX+1);\n    var result = { y: 0, dy: 0 };\n\n    h[0] = 1.0;\n\n    for ( var j = 1; j <= MAX; j++ ) {\n        s[j-1] = this.trapezoid(min, max, j);\n\n        if ( j >= K ) {\n            result = Polynomial.interpolate(h, s, K, j-K, 0.0);\n            if ( Math.abs(result.dy) <= TOLERANCE*result.y) break;\n        }\n\n        s[j] = s[j-1];\n        h[j] = 0.25 * h[j-1];\n    }\n\n    return result.y;\n};\n\n// getters and setters\n\n/**\n *  get degree\n */\nPolynomial.prototype.getDegree = function() {\n    return this.coefs.length - 1;\n};\n\n\n/**\n *  getDerivative\n */\nPolynomial.prototype.getDerivative = function() {\n    var derivative = new Polynomial();\n\n    for ( var i = 1; i < this.coefs.length; i++ ) {\n        derivative.coefs.push(i*this.coefs[i]);\n    }\n\n    return derivative;\n};\n\n\n/**\n *  getRoots\n */\nPolynomial.prototype.getRoots = function() {\n    var result;\n\n    this.simplify();\n\n    switch ( this.getDegree() ) {\n        case 0: result = [];                       break;\n        case 1: result = this.getLinearRoot();     break;\n        case 2: result = this.getQuadraticRoots(); break;\n        case 3: result = this.getCubicRoots();     break;\n        case 4: result = this.getQuarticRoots();   break;\n        default:\n            result = [];\n    }\n\n    return result;\n};\n\n\n/**\n *  getRootsInInterval\n */\nPolynomial.prototype.getRootsInInterval = function(min, max) {\n    var roots = new Array();\n    var root;\n\n    if ( this.getDegree() == 1 ) {\n        root = this.bisection(min, max);\n\n        if ( root != null ) {\n            roots.push(root);\n        }\n    }\n    else {\n        // get roots of derivative\n        var deriv  = this.getDerivative();\n        var droots = deriv.getRootsInInterval(min, max);\n\n        if ( droots.length > 0 ) {\n            // find root on [min, droots[0]]\n            root = this.bisection(min, droots[0]);\n\n            if ( root != null ) {\n                roots.push(root);\n            }\n\n            // find root on [droots[i],droots[i+1]] for 0 <= i <= count-2\n            for ( i = 0; i <= droots.length-2; i++ ) {\n                root = this.bisection(droots[i], droots[i+1]);\n\n                if ( root != null ) {\n                    roots.push(root);\n                }\n            }\n\n            // find root on [droots[count-1],xmax]\n            root = this.bisection(droots[droots.length-1], max);\n\n            if ( root != null ) {\n                roots.push(root);\n            }\n        }\n        else {\n            // polynomial is monotone on [min,max], has at most one root\n            root = this.bisection(min, max);\n\n            if ( root != null ) {\n                roots.push(root);\n            }\n        }\n    }\n\n    return roots;\n};\n\n\n/**\n *  getLinearRoot\n */\nPolynomial.prototype.getLinearRoot = function() {\n    var result = [];\n    var a = this.coefs[1];\n\n    if ( a != 0 ) {\n        result.push( -this.coefs[0] / a );\n    }\n\n    return result;\n};\n\n\n/**\n *  getQuadraticRoots\n */\nPolynomial.prototype.getQuadraticRoots = function() {\n    var results = [];\n\n    if ( this.getDegree() == 2 ) {\n        var a = this.coefs[2];\n        var b = this.coefs[1] / a;\n        var c = this.coefs[0] / a;\n        var d = b*b - 4*c;\n\n        if ( d > 0 ) {\n            var e = Math.sqrt(d);\n\n            results.push( 0.5 * (-b + e) );\n            results.push( 0.5 * (-b - e) );\n        }\n        else if ( d == 0 ) {\n            // really two roots with same value, but we only return one\n            results.push( 0.5 * -b );\n        }\n    }\n\n    return results;\n};\n\n\n/**\n *  getCubicRoots\n *\n *  This code is based on MgcPolynomial.cpp written by David Eberly.  His\n *  code along with many other excellent examples are avaiable at his site:\n *  http://www.geometrictools.com\n */\nPolynomial.prototype.getCubicRoots = function() {\n    var results = [];\n\n    if ( this.getDegree() == 3 ) {\n        var c3 = this.coefs[3];\n        var c2 = this.coefs[2] / c3;\n        var c1 = this.coefs[1] / c3;\n        var c0 = this.coefs[0] / c3;\n\n        var a       = (3*c1 - c2*c2) / 3;\n        var b       = (2*c2*c2*c2 - 9*c1*c2 + 27*c0) / 27;\n        var offset  = c2 / 3;\n        var discrim = b*b/4 + a*a*a/27;\n        var halfB   = b / 2;\n\n        var ZEROepsilon = this.zeroErrorEstimate();\n        if (Math.abs(discrim) <= ZEROepsilon) {\n            discrim = 0;\n        }\n\n        if ( discrim > 0 ) {\n            var e = Math.sqrt(discrim);\n            var tmp;\n            var root;\n\n            tmp = -halfB + e;\n\n            if ( tmp >= 0 ) {\n                root = Math.pow(tmp, 1/3);\n            }\n            else {\n                root = -Math.pow(-tmp, 1/3);\n            }\n\n            tmp = -halfB - e;\n\n            if ( tmp >= 0 ) {\n                root += Math.pow(tmp, 1/3);\n            }\n            else {\n                root -= Math.pow(-tmp, 1/3);\n            }\n\n            results.push( root - offset );\n        }\n        else if ( discrim < 0 ) {\n            var distance = Math.sqrt(-a/3);\n            var angle    = Math.atan2( Math.sqrt(-discrim), -halfB) / 3;\n            var cos      = Math.cos(angle);\n            var sin      = Math.sin(angle);\n            var sqrt3    = Math.sqrt(3);\n\n            results.push( 2*distance*cos - offset );\n            results.push( -distance * (cos + sqrt3 * sin) - offset);\n            results.push( -distance * (cos - sqrt3 * sin) - offset);\n        }\n        else {\n            var tmp;\n\n            if ( halfB >= 0 ) {\n                tmp = -Math.pow(halfB, 1/3);\n            }\n            else {\n                tmp = Math.pow(-halfB, 1/3);\n            }\n\n            results.push( 2*tmp - offset );\n            // really should return next root twice, but we return only one\n            results.push( -tmp - offset );\n        }\n    }\n\n    return results;\n};\n\n\n/**\n *  Sign of a number (+1, -1, +0, -0).\n */\nvar sign = function (x) {\n    return typeof x === 'number' ? x ? x < 0 ? -1 : 1 : x === x ? x : NaN : NaN;\n};\n\n\n/**\n *  Calculates roots of quartic polynomial. <br/>\n *  First, derivative roots are found, then used to split quartic polynomial \n *  into segments, each containing one root of quartic polynomial.\n *  Segments are then passed to newton's method to find roots.\n *\n *  @returns {Array<Number>} roots\n */\nPolynomial.prototype.getQuarticRoots = function () {\n    var results = [];\n\n    var n = this.getDegree();\n\n    if (n == 4) {\n        var poly = new Polynomial();\n\n        poly.coefs = this.coefs.slice();\n        poly.divide_scalar(poly.coefs[n]);\n\n        var ERRF = 1e-15;\n\n        if (Math.abs(poly.coefs[0]) < 10 * ERRF * Math.abs(poly.coefs[3])) {\n            poly.coefs[0] = 0;\n        }\n\n        var poly_d = poly.getDerivative();\n        var derrt = poly_d.getRoots().sort(function (a, b) { return a - b; });\n        var dery = [];\n        var nr = derrt.length - 1;\n        var i;\n        var rb = this.bounds();\n\n        maxabsX = Math.max(Math.abs(rb.minX), Math.abs(rb.maxX));\n\n        var ZEROepsilon = this.zeroErrorEstimate(maxabsX);\n        \n        for (i = 0; i <= nr; i++) {\n            dery.push(poly.eval(derrt[i]));\n        }\n\n        for (i = 0; i <= nr; i++) {\n            if (Math.abs(dery[i]) < ZEROepsilon) {\n                dery[i] = 0;\n            }\n        }\n\n        i = 0;\n        var dx = Math.max(0.1 * (rb.maxX - rb.minX) / n, ERRF);\n        var guesses = [];\n        var minmax = [];\n\n        if (nr > -1) {\n            if (dery[0] != 0) {\n                if (sign(dery[0]) != sign(poly.eval(derrt[0] - dx) - dery[0])) {\n                    guesses.push(derrt[0] - dx);\n                    minmax.push([rb.minX, derrt[0]]);\n                }\n            }\n            else {\n                results.push(derrt[0], derrt[0]);\n                i++;\n            }\n\n            for (; i < nr; i++) {\n                if (dery[i + 1] == 0) {\n                    results.push(derrt[i + 1], derrt[i + 1]);\n                    i++;\n                }\n                else if (sign(dery[i]) != sign(dery[i + 1])) {\n                    guesses.push((derrt[i] + derrt[i + 1]) / 2);\n                    minmax.push([derrt[i], derrt[i + 1]]);\n                }\n            }\n            if (dery[nr] != 0 && sign(dery[nr]) != sign(poly.eval(derrt[nr] + dx) - dery[nr])) {\n                guesses.push(derrt[nr] + dx);\n                minmax.push([derrt[nr], rb.maxX]);\n            }\n        }\n\n        var f = function (x) { return poly.eval(x); };\n        var df = function (x) { return poly_d.eval(x); };\n\n        if (guesses.length > 0) {\n            for (i = 0; i < guesses.length; i++) {\n                guesses[i] = Polynomial.newton_secant_bisection(guesses[i], f, df, 32, minmax[i][0], minmax[i][1]);\n            }\n        }\n\n        results = results.concat(guesses);\n    }\n\n    return results;\n};\n\n\n/**\n *  Estimate what is the maximum polynomial evaluation error value under which polynomial evaluation could be in fact 0.\n *  \n *  @returns {Number} \n */\nPolynomial.prototype.zeroErrorEstimate = function (maxabsX) {\n    var poly = this;\n    var ERRF = 1e-15;\n\n    if (typeof maxabsX === 'undefined') {\n        var rb = poly.bounds();\n        maxabsX = Math.max(Math.abs(rb.minX), Math.abs(rb.maxX));\n    }\n\n    if (maxabsX < 0.001) {\n        return 2*Math.abs(poly.eval(ERRF));\n    }\n\n    var n = poly.coefs.length - 1;\n    var an = poly.coefs[n];\n\n    return 10 * ERRF * poly.coefs.reduce(function (m, v, i) {\n        var nm = v / an * Math.pow(maxabsX, i);\n        return nm > m ? nm : m;\n    }, 0);\n}\n\n\n/**\n *  Calculates upper Real roots bounds. <br/>\n *  Real roots are in interval [negX, posX]. Determined by Fujiwara method.\n *  @see {@link http://en.wikipedia.org/wiki/Properties_of_polynomial_roots}\n *\n *  @returns {{ negX: Number, posX: Number }}\n */\nPolynomial.prototype.bounds_UpperReal_Fujiwara = function () {\n    var a = this.coefs;\n    var n = a.length - 1;\n    var an = a[n];\n\n    if (an != 1) {\n        a = this.coefs.map(function (v) {\n            return v / an;\n        });\n    }\n\n    var b = a.map(function (v, i) {\n        return (i < n)\n            ? Math.pow(Math.abs((i == 0) ? v / 2 : v), 1 / (n - i))\n            : v;\n    });\n\n    var coefSelectionFunc;\n    var find2Max = function (acc, bi, i) {\n        if (coefSelectionFunc(i)) {\n            if (acc.max < bi) {\n                acc.nearmax = acc.max;\n                acc.max = bi;\n            }\n            else if (acc.nearmax < bi) {\n                acc.nearmax = bi;\n            }\n        }\n        return acc;\n    };\n\n    coefSelectionFunc = function (i) { return i < n && a[i] < 0; };\n    var max_nearmax_pos = b.reduce(find2Max, { max: 0, nearmax: 0 });\n\n    coefSelectionFunc = function (i) { return i < n && ((n % 2 == i % 2) ? a[i] < 0 : a[i] > 0); };\n    var max_nearmax_neg = b.reduce(find2Max, { max: 0, nearmax: 0 });\n\n    return {\n        negX: -2 * max_nearmax_neg.max,\n        posX: 2 * max_nearmax_pos.max\n    };\n};\n\n\n/** \n *  Calculates lower Real roots bounds. <br/>\n *  There are no Real roots in interval <negX, posX>. Determined by Fujiwara method.\n *  @see {@link http://en.wikipedia.org/wiki/Properties_of_polynomial_roots}\n *\n *  @returns {{ negX: Number, posX: Number }}\n */\nPolynomial.prototype.bounds_LowerReal_Fujiwara = function () {\n    var poly = new Polynomial();\n\n    poly.coefs = this.coefs.slice().reverse();\n\n    var res = poly.bounds_UpperReal_Fujiwara();\n\n    res.negX = 1 / res.negX;\n    res.posX = 1 / res.posX;\n\n    return res;\n};\n\n\n/** \n *  Calculates left and right Real roots bounds. <br/>\n *  Real roots are in interval [minX, maxX]. Combines Fujiwara lower and upper bounds to get minimal interval.\n *  @see {@link http://en.wikipedia.org/wiki/Properties_of_polynomial_roots}\n *\n *  @returns {{ minX: Number, maxX: Number }}\n*/\nPolynomial.prototype.bounds = function () {\n    var urb = this.bounds_UpperReal_Fujiwara();\n    var rb = { minX: urb.negX, maxX: urb.posX };\n\n    if (urb.negX === 0 && urb.posX === 0) {\n        return rb;\n    }\n\n    if (urb.negX === 0) {\n        rb.minX = this.bounds_LowerReal_Fujiwara().posX;\n    }\n    else if (urb.posX === 0) {\n        rb.maxX = this.bounds_LowerReal_Fujiwara().negX;\n    }\n\n    if (rb.minX > rb.maxX) {\n        //console.log('Polynomial.prototype.bounds: poly has no real roots? or floating point error?');\n        rb.minX = rb.maxX = 0;\n    }\n\n    return rb;\n    // TODO: if sure that there are no complex roots \n    // (maybe by using Sturm's theorem) use:\n    // return this.bounds_Real_Laguerre();\n};\n\n\n/**\n *  Newton's (Newton-Raphson) method for finding Real roots on univariate function. <br/>\n *  When using bounds, algorithm falls back to secant if newton goes out of range.\n *  Bisection is fallback for secant when determined secant is not efficient enough.\n *  @see {@link http://en.wikipedia.org/wiki/Newton%27s_method}\n *  @see {@link http://en.wikipedia.org/wiki/Secant_method}\n *  @see {@link http://en.wikipedia.org/wiki/Bisection_method}\n *\n *  @param {Number} x0 - Inital root guess\n *  @param {function(x)} f - Function which root we are trying to find\n *  @param {function(x)} df - Derivative of function f\n *  @param {Number} max_iterations - Maximum number of algorithm iterations\n *  @param {Number} [min_x] - Left bound value\n *  @param {Number} [max_x] - Right bound value\n *  @returns {Number} - root\n */\nPolynomial.newton_secant_bisection = function (x0, f, df, max_iterations, min, max) {\n    var x, prev_dfx = 0, dfx, prev_x_ef_correction = 0, x_correction, x_new;\n    var v, y_atmin, y_atmax;\n\n    x = x0;\n\n    var ACCURACY = 14;\n    var min_correction_factor = Math.pow(10, -ACCURACY);\n    var isBounded = (typeof min === 'number' && typeof max === 'number');\n\n    if (isBounded) {\n        if (min > max) {\n            throw new Error(\"newton root finding: min must be greater than max\");\n        }\n\n        y_atmin = f(min);\n        y_atmax = f(max);\n\n        if (sign(y_atmin) ==  sign(y_atmax)) {\n            throw new Error(\"newton root finding: y values of bounds must be of opposite sign\");\n        }\n    }\n\n    var isEnoughCorrection = function () {\n        // stop if correction is too small or if correction is in simple loop\n        return (Math.abs(x_correction) <= min_correction_factor * Math.abs(x))\n            || (prev_x_ef_correction == (x - x_correction) - x);\n    };\n\n    var i;\n\n    for (i = 0; i < max_iterations; i++) {\n        dfx = df(x);\n\n        if (dfx == 0) {\n            if (prev_dfx == 0) {\n                // error\n                throw new Error(\"newton root finding: df(x) is zero\");\n            }\n            else {\n                // use previous derivation value\n                dfx = prev_dfx;\n            }\n            // or move x a little?\n            //dfx = df(x != 0 ? x + x * 1e-15 : 1e-15);\n        }\n\n        prev_dfx = dfx;\n        y = f(x);\n        x_correction = y / dfx;\n        x_new = x - x_correction;\n\n        if (isEnoughCorrection()) {\n            break;\n        }\n\n        if (isBounded) {\n            if (sign(y) == sign(y_atmax)) {\n                max = x;\n                y_atmax = y;\n            }\n            else if (sign(y) == sign(y_atmin)) {\n                min = x;\n                y_atmin = y;\n            }\n            else {\n                x = x_new;\n                break;\n            }\n\n            if ((x_new < min) || (x_new > max)) {\n                if (sign(y_atmin) == sign(y_atmax)) {\n                    break;\n                }\n\n                var RATIO_LIMIT = 50;\n                var AIMED_BISECT_OFFSET = 0.25; // [0, 0.5)\n                var dy = y_atmax - y_atmin;\n                var dx = max - min;\n\n                if (dy == 0) {\n                    x_correction = x - (min + dx * 0.5);\n                }\n                else if (Math.abs(dy / Math.min(y_atmin, y_atmax)) > RATIO_LIMIT) {\n                    x_correction = x - (min + dx * (0.5 + (Math.abs(y_atmin) < Math.abs(y_atmax) ? -AIMED_BISECT_OFFSET : AIMED_BISECT_OFFSET)));\n                }\n                else {\n                    x_correction = x - (min - y_atmin / dy * dx);\n                }\n                x_new = x - x_correction;\n\n                if (isEnoughCorrection()) {\n                    break;\n                }\n            }\n        }\n\n        prev_x_ef_correction = x - x_new;\n        x = x_new;\n    }\n\n    return x;\n};\n\nif (typeof module !== \"undefined\") {\n    module.exports = Polynomial;\n}\n","/**\n *\n *   SqrtPolynomial.js\n *\n *   copyright 2003, 2013 Kevin Lindsey\n *\n */\n\nif (typeof module !== \"undefined\") {\n    var Polynomial = require(\"./Polynomial\");\n}\n\n/**\n *   class variables\n */\nSqrtPolynomial.VERSION = 1.0;\n\n// setup inheritance\nSqrtPolynomial.prototype             = new Polynomial();\nSqrtPolynomial.prototype.constructor = SqrtPolynomial;\nSqrtPolynomial.superclass            = Polynomial.prototype;\n\n\n/**\n *  SqrtPolynomial\n */\nfunction SqrtPolynomial() {\n    this.init( arguments );\n}\n\n\n/**\n *  eval\n *\n *  @param {Number} x\n *  @returns {Number}\n */\nSqrtPolynomial.prototype.eval = function(x) {\n    var TOLERANCE = 1e-7;\n    var result = SqrtPolynomial.superclass.eval.call(this, x);\n\n    // NOTE: May need to change the following.  I added these to capture\n    // some really small negative values that were being generated by one\n    // of my Bezier arcLength functions\n    if ( Math.abs(result) < TOLERANCE ) result = 0;\n    if ( result < 0 )\n        throw new Error(\"SqrtPolynomial.eval: cannot take square root of negative number\");\n\n    return Math.sqrt(result);\n};\n\nSqrtPolynomial.prototype.toString = function() {\n    var result = SqrtPolynomial.superclass.toString.call(this);\n\n    return \"sqrt(\" + result + \")\";\n};\n\nif (typeof module !== \"undefined\") {\n    module.exports = SqrtPolynomial;\n}\n","// expose classes\n\nexports.Polynomial = require('./lib/Polynomial');\nexports.SqrtPolynomial = require('./lib/SqrtPolynomial');\n","/* eslint-disable camelcase, eqeqeq, no-labels, space-infix-ops */\n/**\n *\n *  Intersection.js\n *\n *  copyright 2002, 2013 Kevin Lindsey\n *\n */\n\nimport {Point2D, Vector2D} from \"kld-affine\";\nimport {Polynomial} from \"kld-polynomial\";\n\n/**\n *\n * @param {*} o\n * @returns {boolean}\n */\nfunction isNullish(o) {\n    return o === null || o === undefined;\n}\n\n/**\n *  closePolygon\n *\n *  @param {Array<Point2D>} points\n *  @returns {Array<Point2D>}\n */\nfunction closePolygon(points) {\n    const copy = points.slice();\n\n    copy.push(points[0]);\n\n    return copy;\n}\n\n\n/**\n *  Intersection\n */\nclass Intersection {\n    /**\n     *  @param {string} status\n     */\n    constructor(status) {\n        this.init(status);\n    }\n\n\n    /**\n     *  init\n     *\n     *  @param {string} status\n     *  @returns {Intersection}\n     */\n    init(status) {\n        this.status = status;\n        this.points = [];\n    }\n\n\n    /**\n     *  appendPoint\n     *\n     *  @param {Point2D} point\n     */\n    appendPoint(point) {\n        this.points.push(point);\n    }\n\n\n    /**\n     *  appendPoints\n     *\n     *  @param {Array<Point2D>} points\n     */\n    appendPoints(points) {\n        this.points = this.points.concat(points);\n    }\n}\n\n// static methods\n\n/**\n *  intersect\n *\n *  @param {IntersectionArgs} shape1\n *  @param {IntersectionArgs} shape2\n *  @returns {Intersection}\n */\nIntersection.intersect = function(shape1, shape2) {\n    let result;\n\n    if (!isNullish(shape1) && !isNullish(shape2)) {\n        if (shape1.name === \"Path\") {\n            result = Intersection.intersectPathShape(shape1, shape2);\n        }\n        else if (shape2.name === \"Path\") {\n            result = Intersection.intersectPathShape(shape2, shape1);\n        }\n        else {\n            let method;\n            let args;\n\n            if (shape1.name < shape2.name) {\n                method = \"intersect\" + shape1.name + shape2.name;\n                args = shape1.args.concat(shape2.args);\n            }\n            else {\n                method = \"intersect\" + shape2.name + shape1.name;\n                args = shape2.args.concat(shape1.args);\n            }\n\n            if (!(method in Intersection)) {\n                throw new Error(\"Intersection not available: \" + method);\n            }\n\n            result = Intersection[method].apply(null, args);\n        }\n    }\n    else {\n        result = new Intersection(\"No Intersection\");\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectPathShape\n *\n *  @param {IntersectionArgs} path\n *  @param {IntersectionArgs} shape\n *  @returns {Intersection}\n */\nIntersection.intersectPathShape = function(path, shape) {\n    const result = new Intersection(\"No Intersection\");\n\n    for (const segment of path.args) {\n        const inter = Intersection.intersect(segment, shape);\n\n        result.appendPoints(inter.points);\n    }\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectBezier2Bezier2\n *\n *  @param {Point2D} a1\n *  @param {Point2D} a2\n *  @param {Point2D} a3\n *  @param {Point2D} b1\n *  @param {Point2D} b2\n *  @param {Point2D} b3\n *  @returns {Intersection}\n */\nIntersection.intersectBezier2Bezier2 = function(a1, a2, a3, b1, b2, b3) {\n    let a, b;\n    const result = new Intersection(\"No Intersection\");\n\n    a = a2.multiply(-2);\n    const c12 = a1.add(a.add(a3));\n\n    a = a1.multiply(-2);\n    b = a2.multiply(2);\n    const c11 = a.add(b);\n\n    const c10 = new Point2D(a1.x, a1.y);\n\n    a = b2.multiply(-2);\n    const c22 = b1.add(a.add(b3));\n\n    a = b1.multiply(-2);\n    b = b2.multiply(2);\n    const c21 = a.add(b);\n\n    const c20 = new Point2D(b1.x, b1.y);\n\n    // bezout\n    a = c12.x*c11.y - c11.x*c12.y;\n    b = c22.x*c11.y - c11.x*c22.y;\n    const c = c21.x*c11.y - c11.x*c21.y;\n    const d = c11.x*(c10.y - c20.y) + c11.y*(-c10.x + c20.x);\n    const e = c22.x*c12.y - c12.x*c22.y;\n    const f = c21.x*c12.y - c12.x*c21.y;\n    const g = c12.x*(c10.y - c20.y) + c12.y*(-c10.x + c20.x);\n\n    // determinant\n    const poly = new Polynomial(\n        -e*e,\n        -2*e*f,\n        a*b - f*f - 2*e*g,\n        a*c - 2*f*g,\n        a*d - g*g\n    );\n\n    const roots = poly.getRoots();\n\n    for (const s of roots) {\n        if (0 <= s && s <= 1) {\n            const xp = new Polynomial(\n                c12.x,\n                c11.x,\n                c10.x - c20.x - s*c21.x - s*s*c22.x\n            );\n            xp.simplify();\n            const xRoots = xp.getRoots();\n            const yp = new Polynomial(\n                c12.y,\n                c11.y,\n                c10.y - c20.y - s*c21.y - s*s*c22.y\n            );\n            yp.simplify();\n            const yRoots = yp.getRoots();\n\n            if (xRoots.length > 0 && yRoots.length > 0) {\n                const TOLERANCE = 1e-4;\n\n                checkRoots:\n                for (const xRoot of xRoots) {\n                    if (0 <= xRoot && xRoot <= 1) {\n                        for (let k = 0; k < yRoots.length; k++) {\n                            if (Math.abs(xRoot - yRoots[k]) < TOLERANCE) {\n                                result.points.push(c22.multiply(s*s).add(c21.multiply(s).add(c20)));\n                                break checkRoots;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectBezier2Bezier3\n *\n *  @param {Point2D} a1\n *  @param {Point2D} a2\n *  @param {Point2D} a3\n *  @param {Point2D} b1\n *  @param {Point2D} b2\n *  @param {Point2D} b3\n *  @param {Point2D} b4\n *  @returns {Intersection}\n */\nIntersection.intersectBezier2Bezier3 = function(a1, a2, a3, b1, b2, b3, b4) {\n    let a, b, c, d;\n    const result = new Intersection(\"No Intersection\");\n\n    a = a2.multiply(-2);\n    const c12 = a1.add(a.add(a3));\n\n    a = a1.multiply(-2);\n    b = a2.multiply(2);\n    const c11 = a.add(b);\n\n    const c10 = new Point2D(a1.x, a1.y);\n\n    a = b1.multiply(-1);\n    b = b2.multiply(3);\n    c = b3.multiply(-3);\n    d = a.add(b.add(c.add(b4)));\n    const c23 = new Vector2D(d.x, d.y);\n\n    a = b1.multiply(3);\n    b = b2.multiply(-6);\n    c = b3.multiply(3);\n    d = a.add(b.add(c));\n    const c22 = new Vector2D(d.x, d.y);\n\n    a = b1.multiply(-3);\n    b = b2.multiply(3);\n    c = a.add(b);\n    const c21 = new Vector2D(c.x, c.y);\n\n    const c20 = new Vector2D(b1.x, b1.y);\n\n    const c10x2 = c10.x*c10.x;\n    const c10y2 = c10.y*c10.y;\n    const c11x2 = c11.x*c11.x;\n    const c11y2 = c11.y*c11.y;\n    const c12x2 = c12.x*c12.x;\n    const c12y2 = c12.y*c12.y;\n    const c20x2 = c20.x*c20.x;\n    const c20y2 = c20.y*c20.y;\n    const c21x2 = c21.x*c21.x;\n    const c21y2 = c21.y*c21.y;\n    const c22x2 = c22.x*c22.x;\n    const c22y2 = c22.y*c22.y;\n    const c23x2 = c23.x*c23.x;\n    const c23y2 = c23.y*c23.y;\n\n    const poly = new Polynomial(\n        -2*c12.x*c12.y*c23.x*c23.y + c12x2*c23y2 + c12y2*c23x2,\n        -2*c12.x*c12.y*c22.x*c23.y - 2*c12.x*c12.y*c22.y*c23.x + 2*c12y2*c22.x*c23.x +\n            2*c12x2*c22.y*c23.y,\n        -2*c12.x*c21.x*c12.y*c23.y - 2*c12.x*c12.y*c21.y*c23.x - 2*c12.x*c12.y*c22.x*c22.y +\n            2*c21.x*c12y2*c23.x + c12y2*c22x2 + c12x2*(2*c21.y*c23.y + c22y2),\n        2*c10.x*c12.x*c12.y*c23.y + 2*c10.y*c12.x*c12.y*c23.x + c11.x*c11.y*c12.x*c23.y +\n            c11.x*c11.y*c12.y*c23.x - 2*c20.x*c12.x*c12.y*c23.y - 2*c12.x*c20.y*c12.y*c23.x -\n            2*c12.x*c21.x*c12.y*c22.y - 2*c12.x*c12.y*c21.y*c22.x - 2*c10.x*c12y2*c23.x -\n            2*c10.y*c12x2*c23.y + 2*c20.x*c12y2*c23.x + 2*c21.x*c12y2*c22.x -\n            c11y2*c12.x*c23.x - c11x2*c12.y*c23.y + c12x2*(2*c20.y*c23.y + 2*c21.y*c22.y),\n        2*c10.x*c12.x*c12.y*c22.y + 2*c10.y*c12.x*c12.y*c22.x + c11.x*c11.y*c12.x*c22.y +\n            c11.x*c11.y*c12.y*c22.x - 2*c20.x*c12.x*c12.y*c22.y - 2*c12.x*c20.y*c12.y*c22.x -\n            2*c12.x*c21.x*c12.y*c21.y - 2*c10.x*c12y2*c22.x - 2*c10.y*c12x2*c22.y +\n            2*c20.x*c12y2*c22.x - c11y2*c12.x*c22.x - c11x2*c12.y*c22.y + c21x2*c12y2 +\n            c12x2*(2*c20.y*c22.y + c21y2),\n        2*c10.x*c12.x*c12.y*c21.y + 2*c10.y*c12.x*c21.x*c12.y + c11.x*c11.y*c12.x*c21.y +\n            c11.x*c11.y*c21.x*c12.y - 2*c20.x*c12.x*c12.y*c21.y - 2*c12.x*c20.y*c21.x*c12.y -\n            2*c10.x*c21.x*c12y2 - 2*c10.y*c12x2*c21.y + 2*c20.x*c21.x*c12y2 -\n            c11y2*c12.x*c21.x - c11x2*c12.y*c21.y + 2*c12x2*c20.y*c21.y,\n        -2*c10.x*c10.y*c12.x*c12.y - c10.x*c11.x*c11.y*c12.y - c10.y*c11.x*c11.y*c12.x +\n            2*c10.x*c12.x*c20.y*c12.y + 2*c10.y*c20.x*c12.x*c12.y + c11.x*c20.x*c11.y*c12.y +\n            c11.x*c11.y*c12.x*c20.y - 2*c20.x*c12.x*c20.y*c12.y - 2*c10.x*c20.x*c12y2 +\n            c10.x*c11y2*c12.x + c10.y*c11x2*c12.y - 2*c10.y*c12x2*c20.y -\n            c20.x*c11y2*c12.x - c11x2*c20.y*c12.y + c10x2*c12y2 + c10y2*c12x2 +\n            c20x2*c12y2 + c12x2*c20y2\n    );\n    const roots = poly.getRootsInInterval(0, 1);\n\n    for (const s of roots) {\n        const xRoots = new Polynomial(\n            c12.x,\n            c11.x,\n            c10.x - c20.x - s*c21.x - s*s*c22.x - s*s*s*c23.x\n        ).getRoots();\n        const yRoots = new Polynomial(\n            c12.y,\n            c11.y,\n            c10.y - c20.y - s*c21.y - s*s*c22.y - s*s*s*c23.y\n        ).getRoots();\n\n        if (xRoots.length > 0 && yRoots.length > 0) {\n            const TOLERANCE = 1e-4;\n\n            checkRoots:\n            for (const xRoot of xRoots) {\n                if (0 <= xRoot && xRoot <= 1) {\n                    for (let k = 0; k < yRoots.length; k++) {\n                        if (Math.abs(xRoot - yRoots[k]) < TOLERANCE) {\n                            result.points.push(\n                                c23.multiply(s*s*s).add(c22.multiply(s*s).add(c21.multiply(s).add(c20)))\n                            );\n                            break checkRoots;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectBezier2Circle\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @param {Point2D} p3\n *  @param {Point2D} c\n *  @param {number} r\n *  @returns {Intersection}\n */\nIntersection.intersectBezier2Circle = function(p1, p2, p3, c, r) {\n    return Intersection.intersectBezier2Ellipse(p1, p2, p3, c, r, r);\n};\n\n\n/**\n *  intersectBezier2Ellipse\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @param {Point2D} p3\n *  @param {Point2D} ec\n *  @param {number} rx\n *  @param {number} ry\n *  @returns {Intersection}\n */\nIntersection.intersectBezier2Ellipse = function(p1, p2, p3, ec, rx, ry) {\n    let a; // temporary variables\n    // c2, c1, c0; // coefficients of quadratic\n    const result = new Intersection(\"No Intersection\");\n\n    a = p2.multiply(-2);\n    const c2 = p1.add(a.add(p3));\n\n    a = p1.multiply(-2);\n    const b = p2.multiply(2);\n    const c1 = a.add(b);\n\n    const c0 = new Point2D(p1.x, p1.y);\n\n    const rxrx = rx*rx;\n    const ryry = ry*ry;\n    const roots = new Polynomial(\n        ryry*c2.x*c2.x + rxrx*c2.y*c2.y,\n        2*(ryry*c2.x*c1.x + rxrx*c2.y*c1.y),\n        ryry*(2*c2.x*c0.x + c1.x*c1.x) + rxrx*(2*c2.y*c0.y+c1.y*c1.y) -\n            2*(ryry*ec.x*c2.x + rxrx*ec.y*c2.y),\n        2*(ryry*c1.x*(c0.x-ec.x) + rxrx*c1.y*(c0.y-ec.y)),\n        ryry*(c0.x*c0.x+ec.x*ec.x) + rxrx*(c0.y*c0.y + ec.y*ec.y) -\n            2*(ryry*ec.x*c0.x + rxrx*ec.y*c0.y) - rxrx*ryry\n    ).getRoots();\n\n    for (const t of roots) {\n        if (0 <= t && t <= 1) {\n            result.points.push(c2.multiply(t*t).add(c1.multiply(t).add(c0)));\n        }\n    }\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectBezier2Line\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @param {Point2D} p3\n *  @param {Point2D} a1\n *  @param {Point2D} a2\n *  @returns {Intersection}\n */\nIntersection.intersectBezier2Line = function(p1, p2, p3, a1, a2) {\n    let a; // temporary variables\n    // let c2, c1, c0; // coefficients of quadratic\n    // cl; // c coefficient for normal form of line\n    // n; // normal for normal form of line\n    const min = a1.min(a2); // used to determine if point is on line segment\n    const max = a1.max(a2); // used to determine if point is on line segment\n    const result = new Intersection(\"No Intersection\");\n\n    a = p2.multiply(-2);\n    const c2 = p1.add(a.add(p3));\n\n    a = p1.multiply(-2);\n    const b = p2.multiply(2);\n    const c1 = a.add(b);\n\n    const c0 = new Point2D(p1.x, p1.y);\n\n    // Convert line to normal form: ax + by + c = 0\n    // Find normal to line: negative inverse of original line's slope\n    const n = new Vector2D(a1.y - a2.y, a2.x - a1.x);\n\n    // Determine new c coefficient\n    const cl = a1.x*a2.y - a2.x*a1.y;\n\n    // Transform cubic coefficients to line's coordinate system and find roots\n    // of cubic\n    const roots = new Polynomial(\n        n.dot(c2),\n        n.dot(c1),\n        n.dot(c0) + cl\n    ).getRoots();\n\n    // Any roots in closed interval [0,1] are intersections on Bezier, but\n    // might not be on the line segment.\n    // Find intersections and calculate point coordinates\n    for (const t of roots) {\n        if (0 <= t && t <= 1) {\n            // We're within the Bezier curve\n            // Find point on Bezier\n            const p4 = p1.lerp(p2, t);\n            const p5 = p2.lerp(p3, t);\n\n            const p6 = p4.lerp(p5, t);\n\n            // See if point is on line segment\n            // Had to make special cases for vertical and horizontal lines due\n            // to slight errors in calculation of p6\n            if (a1.x == a2.x) {\n                if (min.y <= p6.y && p6.y <= max.y) {\n                    result.status = \"Intersection\";\n                    result.appendPoint(p6);\n                }\n            }\n            else if (a1.y == a2.y) {\n                if (min.x <= p6.x && p6.x <= max.x) {\n                    result.status = \"Intersection\";\n                    result.appendPoint(p6);\n                }\n            }\n            else if (min.x <= p6.x && p6.x <= max.x && min.y <= p6.y && p6.y <= max.y) {\n                result.status = \"Intersection\";\n                result.appendPoint(p6);\n            }\n        }\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectBezier2Polygon\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @param {Point2D} p3\n *  @param {Array<Point2D>} points\n *  @returns {Intersection}\n */\nIntersection.intersectBezier2Polygon = function(p1, p2, p3, points) {\n    return Intersection.intersectBezier2Polyline(p1, p2, p3, closePolygon(points));\n};\n\n\n/**\n *  intersectBezier2Polyline\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @param {Point2D} p3\n *  @param {Array<Point2D>} points\n *  @returns {Intersection}\n */\nIntersection.intersectBezier2Polyline = function(p1, p2, p3, points) {\n    const result = new Intersection(\"No Intersection\");\n    const {length: len} = points;\n\n    for (let i = 0; i < len - 1; i++) {\n        const a1 = points[i];\n        const a2 = points[i + 1];\n        const inter = Intersection.intersectBezier2Line(p1, p2, p3, a1, a2);\n\n        result.appendPoints(inter.points);\n    }\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectBezier2Rectangle\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @param {Point2D} p3\n *  @param {Point2D} r1\n *  @param {Point2D} r2\n *  @returns {Intersection}\n */\nIntersection.intersectBezier2Rectangle = function(p1, p2, p3, r1, r2) {\n    const min = r1.min(r2);\n    const max = r1.max(r2);\n    const topRight = new Point2D(max.x, min.y);\n    const bottomLeft = new Point2D(min.x, max.y);\n\n    const inter1 = Intersection.intersectBezier2Line(p1, p2, p3, min, topRight);\n    const inter2 = Intersection.intersectBezier2Line(p1, p2, p3, topRight, max);\n    const inter3 = Intersection.intersectBezier2Line(p1, p2, p3, max, bottomLeft);\n    const inter4 = Intersection.intersectBezier2Line(p1, p2, p3, bottomLeft, min);\n\n    const result = new Intersection(\"No Intersection\");\n\n    result.appendPoints(inter1.points);\n    result.appendPoints(inter2.points);\n    result.appendPoints(inter3.points);\n    result.appendPoints(inter4.points);\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectBezier3Bezier3\n *\n *  @param {Point2D} a1\n *  @param {Point2D} a2\n *  @param {Point2D} a3\n *  @param {Point2D} a4\n *  @param {Point2D} b1\n *  @param {Point2D} b2\n *  @param {Point2D} b3\n *  @param {Point2D} b4\n *  @returns {Intersection}\n */\nIntersection.intersectBezier3Bezier3 = function(a1, a2, a3, a4, b1, b2, b3, b4) {\n    let a, b, c, d; // temporary variables\n    // c13, c12, c11, c10; // coefficients of cubic\n    // c23, c22, c21, c20; // coefficients of cubic\n    const result = new Intersection(\"No Intersection\");\n\n    // Calculate the coefficients of cubic polynomial\n    a = a1.multiply(-1);\n    b = a2.multiply(3);\n    c = a3.multiply(-3);\n    d = a.add(b.add(c.add(a4)));\n    const c13 = new Vector2D(d.x, d.y);\n\n    a = a1.multiply(3);\n    b = a2.multiply(-6);\n    c = a3.multiply(3);\n    d = a.add(b.add(c));\n    const c12 = new Vector2D(d.x, d.y);\n\n    a = a1.multiply(-3);\n    b = a2.multiply(3);\n    c = a.add(b);\n    const c11 = new Vector2D(c.x, c.y);\n\n    const c10 = new Vector2D(a1.x, a1.y);\n\n    a = b1.multiply(-1);\n    b = b2.multiply(3);\n    c = b3.multiply(-3);\n    d = a.add(b.add(c.add(b4)));\n    const c23 = new Vector2D(d.x, d.y);\n\n    a = b1.multiply(3);\n    b = b2.multiply(-6);\n    c = b3.multiply(3);\n    d = a.add(b.add(c));\n    const c22 = new Vector2D(d.x, d.y);\n\n    a = b1.multiply(-3);\n    b = b2.multiply(3);\n    c = a.add(b);\n    const c21 = new Vector2D(c.x, c.y);\n\n    const c20 = new Vector2D(b1.x, b1.y);\n\n    // bezout\n    a = c13.x * c12.y - c12.x * c13.y;\n    b = c13.x * c11.y - c11.x * c13.y;\n    const c0 = c13.x * c10.y - c10.x * c13.y + c20.x * c13.y - c13.x * c20.y;\n    const c1 = c21.x * c13.y - c13.x * c21.y;\n    const c2 = c22.x * c13.y - c13.x * c22.y;\n    const c3 = c23.x * c13.y - c13.x * c23.y;\n    d = c13.x * c11.y - c11.x * c13.y;\n    const e0 = c13.x * c10.y + c12.x * c11.y - c11.x * c12.y - c10.x * c13.y + c20.x * c13.y - c13.x * c20.y;\n    const e1 = c21.x * c13.y - c13.x * c21.y;\n    const e2 = c22.x * c13.y - c13.x * c22.y;\n    const e3 = c23.x * c13.y - c13.x * c23.y;\n    const f0 = c12.x * c10.y - c10.x * c12.y + c20.x * c12.y - c12.x * c20.y;\n    const f1 = c21.x * c12.y - c12.x * c21.y;\n    const f2 = c22.x * c12.y - c12.x * c22.y;\n    const f3 = c23.x * c12.y - c12.x * c23.y;\n    const g0 = c13.x * c10.y - c10.x * c13.y + c20.x * c13.y - c13.x * c20.y;\n    const g1 = c21.x * c13.y - c13.x * c21.y;\n    const g2 = c22.x * c13.y - c13.x * c22.y;\n    const g3 = c23.x * c13.y - c13.x * c23.y;\n    const h0 = c12.x * c10.y - c10.x * c12.y + c20.x * c12.y - c12.x * c20.y;\n    const h1 = c21.x * c12.y - c12.x * c21.y;\n    const h2 = c22.x * c12.y - c12.x * c22.y;\n    const h3 = c23.x * c12.y - c12.x * c23.y;\n    const i0 = c11.x * c10.y - c10.x * c11.y + c20.x * c11.y - c11.x * c20.y;\n    const i1 = c21.x * c11.y - c11.x * c21.y;\n    const i2 = c22.x * c11.y - c11.x * c22.y;\n    const i3 = c23.x * c11.y - c11.x * c23.y;\n\n    // determinant\n    const poly = new Polynomial(\n        -c3 * e3 * g3,\n        -c3 * e3 * g2 - c3 * e2 * g3 - c2 * e3 * g3,\n        -c3 * e3 * g1 - c3 * e2 * g2 - c2 * e3 * g2 - c3 * e1 * g3 - c2 * e2 * g3 - c1 * e3 * g3,\n        -c3 * e3 * g0 - c3 * e2 * g1 - c2 * e3 * g1 - c3 * e1 * g2 - c2 * e2 * g2 - c1 * e3 * g2 - c3 * e0 * g3 - c2 * e1 * g3 - c1 * e2 * g3 - c0 * e3 * g3 + b * f3 * g3 + c3 * d * h3 - a * f3 * h3 + a * e3 * i3,\n        -c3 * e2 * g0 - c2 * e3 * g0 - c3 * e1 * g1 - c2 * e2 * g1 - c1 * e3 * g1 - c3 * e0 * g2 - c2 * e1 * g2 - c1 * e2 * g2 - c0 * e3 * g2 + b * f3 * g2 - c2 * e0 * g3 - c1 * e1 * g3 - c0 * e2 * g3 + b * f2 * g3 + c3 * d * h2 - a * f3 * h2 + c2 * d * h3 - a * f2 * h3 + a * e3 * i2 + a * e2 * i3,\n        -c3 * e1 * g0 - c2 * e2 * g0 - c1 * e3 * g0 - c3 * e0 * g1 - c2 * e1 * g1 - c1 * e2 * g1 - c0 * e3 * g1 + b * f3 * g1 - c2 * e0 * g2 - c1 * e1 * g2 - c0 * e2 * g2 + b * f2 * g2 - c1 * e0 * g3 - c0 * e1 * g3 + b * f1 * g3 + c3 * d * h1 - a * f3 * h1 + c2 * d * h2 - a * f2 * h2 + c1 * d * h3 - a * f1 * h3 + a * e3 * i1 + a * e2 * i2 + a * e1 * i3,\n        -c3 * e0 * g0 - c2 * e1 * g0 - c1 * e2 * g0 - c0 * e3 * g0 + b * f3 * g0 - c2 * e0 * g1 - c1 * e1 * g1 - c0 * e2 * g1 + b * f2 * g1 - c1 * e0 * g2 - c0 * e1 * g2 + b * f1 * g2 - c0 * e0 * g3 + b * f0 * g3 + c3 * d * h0 - a * f3 * h0 + c2 * d * h1 - a * f2 * h1 + c1 * d * h2 - a * f1 * h2 + c0 * d * h3 - a * f0 * h3 + a * e3 * i0 + a * e2 * i1 + a * e1 * i2 - b * d * i3 + a * e0 * i3,\n        -c2 * e0 * g0 - c1 * e1 * g0 - c0 * e2 * g0 + b * f2 * g0 - c1 * e0 * g1 - c0 * e1 * g1 + b * f1 * g1 - c0 * e0 * g2 + b * f0 * g2 + c2 * d * h0 - a * f2 * h0 + c1 * d * h1 - a * f1 * h1 + c0 * d * h2 - a * f0 * h2 + a * e2 * i0 + a * e1 * i1 - b * d * i2 + a * e0 * i2,\n        -c1 * e0 * g0 - c0 * e1 * g0 + b * f1 * g0 - c0 * e0 * g1 + b * f0 * g1 + c1 * d * h0 - a * f1 * h0 + c0 * d * h1 - a * f0 * h1 + a * e1 * i0 - b * d * i1 + a * e0 * i1,\n        -c0 * e0 * g0 + b * f0 * g0 + c0 * d * h0 - a * f0 * h0 - b * d * i0 + a * e0 * i0\n    );\n    poly.simplify();\n    const roots = poly.getRootsInInterval(0, 1);\n\n    for (const s of roots) {\n        const xp = new Polynomial(\n            c13.x,\n            c12.x,\n            c11.x,\n            c10.x - c20.x - s*c21.x - s*s*c22.x - s*s*s*c23.x\n        );\n        xp.simplify();\n        const xRoots = xp.getRoots();\n        const yp = new Polynomial(\n            c13.y,\n            c12.y,\n            c11.y,\n            c10.y - c20.y - s*c21.y - s*s*c22.y - s*s*s*c23.y\n        );\n        yp.simplify();\n        const yRoots = yp.getRoots();\n\n        if (xRoots.length > 0 && yRoots.length > 0) {\n            const TOLERANCE = 1e-4;\n\n            checkRoots:\n            for (const xRoot of xRoots) {\n                if (0 <= xRoot && xRoot <= 1) {\n                    for (let k = 0; k < yRoots.length; k++) {\n                        if (Math.abs(xRoot - yRoots[k]) < TOLERANCE) {\n                            result.points.push(\n                                c23.multiply(s*s*s).add(c22.multiply(s*s).add(c21.multiply(s).add(c20)))\n                            );\n                            break checkRoots;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectBezier3Circle\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @param {Point2D} p3\n *  @param {Point2D} p4\n *  @param {Point2D} c\n *  @param {number} r\n *  @returns {Intersection}\n */\nIntersection.intersectBezier3Circle = function(p1, p2, p3, p4, c, r) {\n    return Intersection.intersectBezier3Ellipse(p1, p2, p3, p4, c, r, r);\n};\n\n\n/**\n *  intersectBezier3Ellipse\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @param {Point2D} p3\n *  @param {Point2D} p4\n *  @param {Point2D} ec\n *  @param {number} rx\n *  @param {number} ry\n *  @returns {Intersection}\n */\nIntersection.intersectBezier3Ellipse = function(p1, p2, p3, p4, ec, rx, ry) {\n    let a, b, c, d; // temporary variables\n    // c3, c2, c1, c0; // coefficients of cubic\n    const result = new Intersection(\"No Intersection\");\n\n    // Calculate the coefficients of cubic polynomial\n    a = p1.multiply(-1);\n    b = p2.multiply(3);\n    c = p3.multiply(-3);\n    d = a.add(b.add(c.add(p4)));\n    const c3 = new Vector2D(d.x, d.y);\n\n    a = p1.multiply(3);\n    b = p2.multiply(-6);\n    c = p3.multiply(3);\n    d = a.add(b.add(c));\n    const c2 = new Vector2D(d.x, d.y);\n\n    a = p1.multiply(-3);\n    b = p2.multiply(3);\n    c = a.add(b);\n    const c1 = new Vector2D(c.x, c.y);\n\n    const c0 = new Vector2D(p1.x, p1.y);\n\n    const rxrx = rx*rx;\n    const ryry = ry*ry;\n    const poly = new Polynomial(\n        c3.x*c3.x*ryry + c3.y*c3.y*rxrx,\n        2*(c3.x*c2.x*ryry + c3.y*c2.y*rxrx),\n        2*(c3.x*c1.x*ryry + c3.y*c1.y*rxrx) + c2.x*c2.x*ryry + c2.y*c2.y*rxrx,\n        2*c3.x*ryry*(c0.x - ec.x) + 2*c3.y*rxrx*(c0.y - ec.y) +\n            2*(c2.x*c1.x*ryry + c2.y*c1.y*rxrx),\n        2*c2.x*ryry*(c0.x - ec.x) + 2*c2.y*rxrx*(c0.y - ec.y) +\n            c1.x*c1.x*ryry + c1.y*c1.y*rxrx,\n        2*c1.x*ryry*(c0.x - ec.x) + 2*c1.y*rxrx*(c0.y - ec.y),\n        c0.x*c0.x*ryry - 2*c0.y*ec.y*rxrx - 2*c0.x*ec.x*ryry +\n            c0.y*c0.y*rxrx + ec.x*ec.x*ryry + ec.y*ec.y*rxrx - rxrx*ryry\n    );\n    const roots = poly.getRootsInInterval(0, 1);\n\n    for (const t of roots) {\n        result.points.push(\n            c3.multiply(t*t*t).add(c2.multiply(t*t).add(c1.multiply(t).add(c0)))\n        );\n    }\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectBezier3Line\n *\n *  Many thanks to Dan Sunday at SoftSurfer.com.  He gave me a very thorough\n *  sketch of the algorithm used here.  Without his help, I'm not sure when I\n *  would have figured out this intersection problem.\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @param {Point2D} p3\n *  @param {Point2D} p4\n *  @param {Point2D} a1\n *  @param {Point2D} a2\n *  @returns {Intersection}\n */\nIntersection.intersectBezier3Line = function(p1, p2, p3, p4, a1, a2) {\n    let a, b, c, d; // temporary variables\n    // c3, c2, c1, c0; // coefficients of cubic\n    // cl; // c coefficient for normal form of line\n    // n; // normal for normal form of line\n    const min = a1.min(a2); // used to determine if point is on line segment\n    const max = a1.max(a2); // used to determine if point is on line segment\n    const result = new Intersection(\"No Intersection\");\n\n    // Start with Bezier using Bernstein polynomials for weighting functions:\n    //     (1-t^3)P1 + 3t(1-t)^2P2 + 3t^2(1-t)P3 + t^3P4\n    //\n    // Expand and collect terms to form linear combinations of original Bezier\n    // controls.  This ends up with a vector cubic in t:\n    //     (-P1+3P2-3P3+P4)t^3 + (3P1-6P2+3P3)t^2 + (-3P1+3P2)t + P1\n    //             /\\                  /\\                /\\       /\\\n    //             ||                  ||                ||       ||\n    //             c3                  c2                c1       c0\n\n    // Calculate the coefficients\n    a = p1.multiply(-1);\n    b = p2.multiply(3);\n    c = p3.multiply(-3);\n    d = a.add(b.add(c.add(p4)));\n    const c3 = new Vector2D(d.x, d.y);\n\n    a = p1.multiply(3);\n    b = p2.multiply(-6);\n    c = p3.multiply(3);\n    d = a.add(b.add(c));\n    const c2 = new Vector2D(d.x, d.y);\n\n    a = p1.multiply(-3);\n    b = p2.multiply(3);\n    c = a.add(b);\n    const c1 = new Vector2D(c.x, c.y);\n\n    const c0 = new Vector2D(p1.x, p1.y);\n\n    // Convert line to normal form: ax + by + c = 0\n    // Find normal to line: negative inverse of original line's slope\n    const n = new Vector2D(a1.y - a2.y, a2.x - a1.x);\n\n    // Determine new c coefficient\n    const cl = a1.x*a2.y - a2.x*a1.y;\n\n    // ?Rotate each cubic coefficient using line for new coordinate system?\n    // Find roots of rotated cubic\n    const roots = new Polynomial(\n        n.dot(c3),\n        n.dot(c2),\n        n.dot(c1),\n        n.dot(c0) + cl\n    ).getRoots();\n\n    // Any roots in closed interval [0,1] are intersections on Bezier, but\n    // might not be on the line segment.\n    // Find intersections and calculate point coordinates\n    for (const t of roots) {\n        if (0 <= t && t <= 1) {\n            // We're within the Bezier curve\n            // Find point on Bezier\n            const p5 = p1.lerp(p2, t);\n            const p6 = p2.lerp(p3, t);\n            const p7 = p3.lerp(p4, t);\n\n            const p8 = p5.lerp(p6, t);\n            const p9 = p6.lerp(p7, t);\n\n            const p10 = p8.lerp(p9, t);\n\n            // See if point is on line segment\n            // Had to make special cases for vertical and horizontal lines due\n            // to slight errors in calculation of p10\n            if (a1.x == a2.x) {\n                if (min.y <= p10.y && p10.y <= max.y) {\n                    result.status = \"Intersection\";\n                    result.appendPoint(p10);\n                }\n            }\n            else if (a1.y == a2.y) {\n                if (min.x <= p10.x && p10.x <= max.x) {\n                    result.status = \"Intersection\";\n                    result.appendPoint(p10);\n                }\n            }\n            else if (min.x <= p10.x && p10.x <= max.x && min.y <= p10.y && p10.y <= max.y) {\n                result.status = \"Intersection\";\n                result.appendPoint(p10);\n            }\n        }\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectBezier3Polygon\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @param {Point2D} p3\n *  @param {Point2D} p4\n *  @param {Array<Point2D>} points\n *  @returns {Intersection}\n */\nIntersection.intersectBezier3Polygon = function(p1, p2, p3, p4, points) {\n    return this.intersectBezier3Polyline(p1, p2, p3, p4, closePolygon(points));\n};\n\n\n/**\n *  intersectBezier3Polyline\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @param {Point2D} p3\n *  @param {Point2D} p4\n *  @param {Array<Point2D>} points\n *  @returns {Intersection}\n */\nIntersection.intersectBezier3Polyline = function(p1, p2, p3, p4, points) {\n    const result = new Intersection(\"No Intersection\");\n    const {length: len} = points;\n\n    for (let i = 0; i < len - 1; i++) {\n        const a1 = points[i];\n        const a2 = points[i + 1];\n        const inter = Intersection.intersectBezier3Line(p1, p2, p3, p4, a1, a2);\n\n        result.appendPoints(inter.points);\n    }\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectBezier3Rectangle\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @param {Point2D} p3\n *  @param {Point2D} p4\n *  @param {Point2D} r1\n *  @param {Point2D} r2\n *  @returns {Intersection}\n */\nIntersection.intersectBezier3Rectangle = function(p1, p2, p3, p4, r1, r2) {\n    const min = r1.min(r2);\n    const max = r1.max(r2);\n    const topRight = new Point2D(max.x, min.y);\n    const bottomLeft = new Point2D(min.x, max.y);\n\n    const inter1 = Intersection.intersectBezier3Line(p1, p2, p3, p4, min, topRight);\n    const inter2 = Intersection.intersectBezier3Line(p1, p2, p3, p4, topRight, max);\n    const inter3 = Intersection.intersectBezier3Line(p1, p2, p3, p4, max, bottomLeft);\n    const inter4 = Intersection.intersectBezier3Line(p1, p2, p3, p4, bottomLeft, min);\n\n    const result = new Intersection(\"No Intersection\");\n\n    result.appendPoints(inter1.points);\n    result.appendPoints(inter2.points);\n    result.appendPoints(inter3.points);\n    result.appendPoints(inter4.points);\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectCircleCircle\n *\n *  @param {Point2D} c1\n *  @param {number} r1\n *  @param {Point2D} c2\n *  @param {number} r2\n *  @returns {Intersection}\n */\nIntersection.intersectCircleCircle = function(c1, r1, c2, r2) {\n    let result;\n\n    // Determine minimum and maximum radii where circles can intersect\n    const r_max = r1 + r2;\n    const r_min = Math.abs(r1 - r2);\n\n    // Determine actual distance between circle circles\n    const c_dist = c1.distanceFrom(c2);\n\n    if (c_dist > r_max) {\n        result = new Intersection(\"Outside\");\n    }\n    else if (c_dist < r_min) {\n        result = new Intersection(\"Inside\");\n    }\n    else {\n        result = new Intersection(\"Intersection\");\n\n        const a = (r1*r1 - r2*r2 + c_dist*c_dist) / (2*c_dist);\n        const h = Math.sqrt(r1*r1 - a*a);\n        const p = c1.lerp(c2, a/c_dist);\n        const b = h / c_dist;\n\n        result.points.push(\n            new Point2D(\n                p.x - b * (c2.y - c1.y),\n                p.y + b * (c2.x - c1.x)\n            )\n        );\n        result.points.push(\n            new Point2D(\n                p.x + b * (c2.y - c1.y),\n                p.y - b * (c2.x - c1.x)\n            )\n        );\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectCircleEllipse\n *\n *  @param {Point2D} cc\n *  @param {number} r\n *  @param {Point2D} ec\n *  @param {number} rx\n *  @param {number} ry\n *  @returns {Intersection}\n */\nIntersection.intersectCircleEllipse = function(cc, r, ec, rx, ry) {\n    return Intersection.intersectEllipseEllipse(cc, r, r, ec, rx, ry);\n};\n\n\n/**\n *  intersectCircleLine\n *\n *  @param {Point2D} c\n *  @param {number} r\n *  @param {Point2D} a1\n *  @param {Point2D} a2\n *  @returns {Intersection}\n */\nIntersection.intersectCircleLine = function(c, r, a1, a2) {\n    let result;\n    const a = (a2.x - a1.x) * (a2.x - a1.x) +\n             (a2.y - a1.y) * (a2.y - a1.y);\n    const b = 2 * ((a2.x - a1.x) * (a1.x - c.x) +\n                   (a2.y - a1.y) * (a1.y - c.y));\n    const cc = c.x*c.x + c.y*c.y + a1.x*a1.x + a1.y*a1.y -\n             2 * (c.x * a1.x + c.y * a1.y) - r*r;\n    const deter = b*b - 4*a*cc;\n\n    if (deter < 0) {\n        result = new Intersection(\"Outside\");\n    }\n    else if (deter == 0) {\n        result = new Intersection(\"Tangent\");\n        // NOTE: should calculate this point\n    }\n    else {\n        const e = Math.sqrt(deter);\n        const u1 = (-b + e) / (2*a);\n        const u2 = (-b - e) / (2*a);\n\n        if ((u1 < 0 || u1 > 1) && (u2 < 0 || u2 > 1)) {\n            if ((u1 < 0 && u2 < 0) || (u1 > 1 && u2 > 1)) {\n                result = new Intersection(\"Outside\");\n            }\n            else {\n                result = new Intersection(\"Inside\");\n            }\n        }\n        else {\n            result = new Intersection(\"Intersection\");\n\n            if (0 <= u1 && u1 <= 1) {\n                result.points.push(a1.lerp(a2, u1));\n            }\n\n            if (0 <= u2 && u2 <= 1) {\n                result.points.push(a1.lerp(a2, u2));\n            }\n        }\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectCirclePolygon\n *\n *  @param {Point2D} c\n *  @param {number} r\n *  @param {Array<Point2D>} points\n *  @returns {Intersection}\n */\nIntersection.intersectCirclePolygon = function(c, r, points) {\n    return this.intersectCirclePolyline(c, r, closePolygon(points));\n};\n\n\n/**\n *  intersectCirclePolyline\n *\n *  @param {Point2D} c\n *  @param {number} r\n *  @param {Array<Point2D>} points\n *  @returns {Intersection}\n */\nIntersection.intersectCirclePolyline = function(c, r, points) {\n    const result = new Intersection(\"No Intersection\");\n    const {length: len} = points;\n    let inter;\n\n    for (let i = 0; i < len - 1; i++) {\n        const a1 = points[i];\n        const a2 = points[i + 1];\n\n        inter = Intersection.intersectCircleLine(c, r, a1, a2);\n        result.appendPoints(inter.points);\n    }\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n    else {\n        result.status = inter.status;\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectCircleRectangle\n *\n *  @param {Point2D} c\n *  @param {number} r\n *  @param {Point2D} r1\n *  @param {Point2D} r2\n *  @returns {Intersection}\n */\nIntersection.intersectCircleRectangle = function(c, r, r1, r2) {\n    const min = r1.min(r2);\n    const max = r1.max(r2);\n    const topRight = new Point2D(max.x, min.y);\n    const bottomLeft = new Point2D(min.x, max.y);\n\n    const inter1 = Intersection.intersectCircleLine(c, r, min, topRight);\n    const inter2 = Intersection.intersectCircleLine(c, r, topRight, max);\n    const inter3 = Intersection.intersectCircleLine(c, r, max, bottomLeft);\n    const inter4 = Intersection.intersectCircleLine(c, r, bottomLeft, min);\n\n    const result = new Intersection(\"No Intersection\");\n\n    result.appendPoints(inter1.points);\n    result.appendPoints(inter2.points);\n    result.appendPoints(inter3.points);\n    result.appendPoints(inter4.points);\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n    else {\n        result.status = inter1.status;\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectEllipseEllipse\n *\n *  This code is based on MgcIntr2DElpElp.cpp written by David Eberly.  His\n *  code along with many other excellent examples are avaiable at his site:\n *  http://www.magic-software.com\n *\n *  NOTE: Rotation will need to be added to this function\n *\n *  @param {Point2D} c1\n *  @param {number} rx1\n *  @param {number} ry1\n *  @param {Point2D} c2\n *  @param {number} rx2\n *  @param {number} ry2\n *  @returns {Intersection}\n */\nIntersection.intersectEllipseEllipse = function(c1, rx1, ry1, c2, rx2, ry2) {\n    const a = [\n        ry1*ry1, 0, rx1*rx1, -2*ry1*ry1*c1.x, -2*rx1*rx1*c1.y,\n        ry1*ry1*c1.x*c1.x + rx1*rx1*c1.y*c1.y - rx1*rx1*ry1*ry1\n    ];\n    const b = [\n        ry2*ry2, 0, rx2*rx2, -2*ry2*ry2*c2.x, -2*rx2*rx2*c2.y,\n        ry2*ry2*c2.x*c2.x + rx2*rx2*c2.y*c2.y - rx2*rx2*ry2*ry2\n    ];\n\n    const yPoly = Intersection.bezout(a, b);\n    const yRoots = yPoly.getRoots();\n    const epsilon = 1e-3;\n    const norm0 = (a[0]*a[0] + 2*a[1]*a[1] + a[2]*a[2]) * epsilon;\n    const norm1 = (b[0]*b[0] + 2*b[1]*b[1] + b[2]*b[2]) * epsilon;\n    const result = new Intersection(\"No Intersection\");\n\n    for (let y = 0; y < yRoots.length; y++) {\n        const xPoly = new Polynomial(\n            a[0],\n            a[3] + yRoots[y] * a[1],\n            a[5] + yRoots[y] * (a[4] + yRoots[y]*a[2])\n        );\n        const xRoots = xPoly.getRoots();\n\n        for (let x = 0; x < xRoots.length; x++) {\n            let tst =\n                (a[0]*xRoots[x] + a[1]*yRoots[y] + a[3]) * xRoots[x] +\n                (a[2]*yRoots[y] + a[4]) * yRoots[y] + a[5];\n            if (Math.abs(tst) < norm0) {\n                tst =\n                    (b[0]*xRoots[x] + b[1]*yRoots[y] + b[3]) * xRoots[x] +\n                    (b[2]*yRoots[y] + b[4]) * yRoots[y] + b[5];\n                if (Math.abs(tst) < norm1) {\n                    result.appendPoint(new Point2D(xRoots[x], yRoots[y]));\n                }\n            }\n        }\n    }\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectEllipseLine\n *\n *  NOTE: Rotation will need to be added to this function\n *\n *  @param {Point2D} c\n *  @param {number} rx\n *  @param {number} ry\n *  @param {Point2D} a1\n *  @param {Point2D} a2\n *  @returns {Intersection}\n */\nIntersection.intersectEllipseLine = function(c, rx, ry, a1, a2) {\n    let result;\n    const orign = new Vector2D(a1.x, a1.y);\n    const dir = Vector2D.fromPoints(a1, a2);\n    const center = new Vector2D(c.x, c.y);\n    const diff = orign.subtract(center);\n    const mDir = new Vector2D(dir.x/(rx*rx), dir.y/(ry*ry));\n    const mDiff = new Vector2D(diff.x/(rx*rx), diff.y/(ry*ry));\n\n    const a = dir.dot(mDir);\n    const b = dir.dot(mDiff);\n    c = diff.dot(mDiff) - 1.0;\n    const d = b*b - a*c;\n\n    if (d < 0) {\n        result = new Intersection(\"Outside\");\n    }\n    else if (d > 0) {\n        const root = Math.sqrt(d); // eslint-disable-line no-shadow\n        const t_a = (-b - root) / a;\n        const t_b = (-b + root) / a;\n\n        if ((t_a < 0 || 1 < t_a) && (t_b < 0 || 1 < t_b)) {\n            if ((t_a < 0 && t_b < 0) || (t_a > 1 && t_b > 1)) {\n                result = new Intersection(\"Outside\");\n            }\n            else {\n                result = new Intersection(\"Inside\");\n            }\n        }\n        else {\n            result = new Intersection(\"Intersection\");\n            if (0 <= t_a && t_a <= 1) {\n                result.appendPoint(a1.lerp(a2, t_a));\n            }\n            if (0 <= t_b && t_b <= 1) {\n                result.appendPoint(a1.lerp(a2, t_b));\n            }\n        }\n    }\n    else {\n        const t = -b/a;\n\n        if (0 <= t && t <= 1) {\n            result = new Intersection(\"Intersection\");\n            result.appendPoint(a1.lerp(a2, t));\n        }\n        else {\n            result = new Intersection(\"Outside\");\n        }\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectEllipsePolygon\n *\n *  @param {Point2D} c\n *  @param {number} rx\n *  @param {number} ry\n *  @param {Array<Point2D>} points\n *  @returns {Intersection}\n */\nIntersection.intersectEllipsePolygon = function(c, rx, ry, points) {\n    return this.intersectEllipsePolyline(c, rx, ry, closePolygon(points));\n};\n\n\n/**\n *  intersectEllipsePolyline\n *\n *  @param {Point2D} c\n *  @param {number} rx\n *  @param {number} ry\n *  @param {Array<Point2D>} points\n *  @returns {Intersection}\n */\nIntersection.intersectEllipsePolyline = function(c, rx, ry, points) {\n    const result = new Intersection(\"No Intersection\");\n    const {length: len} = points;\n\n    for (let i = 0; i < len - 1; i++) {\n        const b1 = points[i];\n        const b2 = points[i + 1];\n        const inter = Intersection.intersectEllipseLine(c, rx, ry, b1, b2);\n\n        result.appendPoints(inter.points);\n    }\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectEllipseRectangle\n *\n *  @param {Point2D} c\n *  @param {number} rx\n *  @param {number} ry\n *  @param {Point2D} r1\n *  @param {Point2D} r2\n *  @returns {Intersection}\n */\nIntersection.intersectEllipseRectangle = function(c, rx, ry, r1, r2) {\n    const min = r1.min(r2);\n    const max = r1.max(r2);\n    const topRight = new Point2D(max.x, min.y);\n    const bottomLeft = new Point2D(min.x, max.y);\n\n    const inter1 = Intersection.intersectEllipseLine(c, rx, ry, min, topRight);\n    const inter2 = Intersection.intersectEllipseLine(c, rx, ry, topRight, max);\n    const inter3 = Intersection.intersectEllipseLine(c, rx, ry, max, bottomLeft);\n    const inter4 = Intersection.intersectEllipseLine(c, rx, ry, bottomLeft, min);\n\n    const result = new Intersection(\"No Intersection\");\n\n    result.appendPoints(inter1.points);\n    result.appendPoints(inter2.points);\n    result.appendPoints(inter3.points);\n    result.appendPoints(inter4.points);\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectLineLine\n *\n *  @param {Point2D} a1\n *  @param {Point2D} a2\n *  @param {Point2D} b1\n *  @param {Point2D} b2\n *  @returns {Intersection}\n */\nIntersection.intersectLineLine = function(a1, a2, b1, b2) {\n    let result;\n\n    const ua_t = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x);\n    const ub_t = (a2.x - a1.x) * (a1.y - b1.y) - (a2.y - a1.y) * (a1.x - b1.x);\n    const u_b = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);\n\n    if (u_b != 0) {\n        const ua = ua_t / u_b;\n        const ub = ub_t / u_b;\n\n        if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {\n            result = new Intersection(\"Intersection\");\n            result.points.push(\n                new Point2D(\n                    a1.x + ua * (a2.x - a1.x),\n                    a1.y + ua * (a2.y - a1.y)\n                )\n            );\n        }\n        else {\n            result = new Intersection(\"No Intersection\");\n        }\n    }\n    else if (ua_t == 0 || ub_t == 0) {\n        result = new Intersection(\"Coincident\");\n    }\n    else {\n        result = new Intersection(\"Parallel\");\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectLinePolygon\n *\n *  @param {Point2D} a1\n *  @param {Point2D} a2\n *  @param {Array<Point2D>} points\n *  @returns {Intersection}\n */\nIntersection.intersectLinePolygon = function(a1, a2, points) {\n    return this.intersectLinePolyline(a1, a2, closePolygon(points));\n};\n\n\n/**\n *  intersectLinePolyline\n *\n *  @param {Point2D} a1\n *  @param {Point2D} a2\n *  @param {Array<Point2D>} points\n *  @returns {Intersection}\n */\nIntersection.intersectLinePolyline = function(a1, a2, points) {\n    const result = new Intersection(\"No Intersection\");\n    const {length: len} = points;\n\n    for (let i = 0; i < len - 1; i++) {\n        const b1 = points[i];\n        const b2 = points[i + 1];\n        const inter = Intersection.intersectLineLine(a1, a2, b1, b2);\n\n        result.appendPoints(inter.points);\n    }\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectLineRectangle\n *\n *  @param {Point2D} a1\n *  @param {Point2D} a2\n *  @param {Point2D} r1\n *  @param {Point2D} r2\n *  @returns {Intersection}\n */\nIntersection.intersectLineRectangle = function(a1, a2, r1, r2) {\n    const min = r1.min(r2);\n    const max = r1.max(r2);\n    const topRight = new Point2D(max.x, min.y);\n    const bottomLeft = new Point2D(min.x, max.y);\n\n    const inter1 = Intersection.intersectLineLine(min, topRight, a1, a2);\n    const inter2 = Intersection.intersectLineLine(topRight, max, a1, a2);\n    const inter3 = Intersection.intersectLineLine(max, bottomLeft, a1, a2);\n    const inter4 = Intersection.intersectLineLine(bottomLeft, min, a1, a2);\n\n    const result = new Intersection(\"No Intersection\");\n\n    result.appendPoints(inter1.points);\n    result.appendPoints(inter2.points);\n    result.appendPoints(inter3.points);\n    result.appendPoints(inter4.points);\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectPolygonPolygon\n *\n *  @param {Array<Point2D>} points1\n *  @param {Array<Point2D>} points2\n *  @returns {Intersection}\n */\nIntersection.intersectPolygonPolygon = function(points1, points2) {\n    return this.intersectPolylinePolyline(closePolygon(points1), closePolygon(points2));\n};\n\n\n/**\n *  intersectPolygonPolyline\n *\n *  @param {Array<Point2D>} points1\n *  @param {Array<Point2D>} points2\n *  @returns {Intersection}\n */\nIntersection.intersectPolygonPolyline = function(points1, points2) {\n    return this.intersectPolylinePolyline(closePolygon(points1), points2);\n};\n\n\n/**\n *  intersectPolygonRectangle\n *\n *  @param {Array<Point2D>} points\n *  @param {Point2D} r1\n *  @param {Point2D} r2\n *  @returns {Intersection}\n */\nIntersection.intersectPolygonRectangle = function(points, r1, r2) {\n    return this.intersectPolylineRectangle(closePolygon(points), r1, r2);\n};\n\n\n/**\n *  intersectPolylinePolyline\n *\n *  @param {Array<Point2D>} points1\n *  @param {Array<Point2D>} points2\n *  @returns {Intersection}\n */\nIntersection.intersectPolylinePolyline = function(points1, points2) {\n    const result = new Intersection(\"No Intersection\");\n    const {length: len} = points1;\n\n    for (let i = 0; i < len - 1; i++) {\n        const a1 = points1[i];\n        const a2 = points1[i + 1];\n        const inter = Intersection.intersectLinePolyline(a1, a2, points2);\n\n        result.appendPoints(inter.points);\n    }\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectPolylineRectangle\n *\n *  @param {Array<Point2D>} points\n *  @param {Point2D} r1\n *  @param {Point2D} r2\n *  @returns {Intersection}\n */\nIntersection.intersectPolylineRectangle = function(points, r1, r2) {\n    const min = r1.min(r2);\n    const max = r1.max(r2);\n    const topRight = new Point2D(max.x, min.y);\n    const bottomLeft = new Point2D(min.x, max.y);\n\n    const inter1 = Intersection.intersectLinePolyline(min, topRight, points);\n    const inter2 = Intersection.intersectLinePolyline(topRight, max, points);\n    const inter3 = Intersection.intersectLinePolyline(max, bottomLeft, points);\n    const inter4 = Intersection.intersectLinePolyline(bottomLeft, min, points);\n\n    const result = new Intersection(\"No Intersection\");\n\n    result.appendPoints(inter1.points);\n    result.appendPoints(inter2.points);\n    result.appendPoints(inter3.points);\n    result.appendPoints(inter4.points);\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectRectangleRectangle\n *\n *  @param {Point2D} a1\n *  @param {Point2D} a2\n *  @param {Point2D} b1\n *  @param {Point2D} b2\n *  @returns {Intersection}\n */\nIntersection.intersectRectangleRectangle = function(a1, a2, b1, b2) {\n    const min = a1.min(a2);\n    const max = a1.max(a2);\n    const topRight = new Point2D(max.x, min.y);\n    const bottomLeft = new Point2D(min.x, max.y);\n\n    const inter1 = Intersection.intersectLineRectangle(min, topRight, b1, b2);\n    const inter2 = Intersection.intersectLineRectangle(topRight, max, b1, b2);\n    const inter3 = Intersection.intersectLineRectangle(max, bottomLeft, b1, b2);\n    const inter4 = Intersection.intersectLineRectangle(bottomLeft, min, b1, b2);\n\n    const result = new Intersection(\"No Intersection\");\n\n    result.appendPoints(inter1.points);\n    result.appendPoints(inter2.points);\n    result.appendPoints(inter3.points);\n    result.appendPoints(inter4.points);\n\n    if (result.points.length > 0) {\n        result.status = \"Intersection\";\n    }\n\n    return result;\n};\n\n\n/**\n *  intersectRayRay\n *\n *  @param {Point2D} a1\n *  @param {Point2D} a2\n *  @param {Point2D} b1\n *  @param {Point2D} b2\n *  @returns {Intersection}\n */\nIntersection.intersectRayRay = function(a1, a2, b1, b2) {\n    let result;\n\n    const ua_t = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x);\n    const ub_t = (a2.x - a1.x) * (a1.y - b1.y) - (a2.y - a1.y) * (a1.x - b1.x);\n    const u_b = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);\n\n    if (u_b != 0) {\n        const ua = ua_t / u_b;\n\n        result = new Intersection(\"Intersection\");\n        result.points.push(\n            new Point2D(\n                a1.x + ua * (a2.x - a1.x),\n                a1.y + ua * (a2.y - a1.y)\n            )\n        );\n    }\n    else if (ua_t == 0 || ub_t == 0) {\n        result = new Intersection(\"Coincident\");\n    }\n    else {\n        result = new Intersection(\"Parallel\");\n    }\n\n    return result;\n};\n\n\n/**\n *  bezout\n *\n *  This code is based on MgcIntr2DElpElp.cpp written by David Eberly.  His\n *  code along with many other excellent examples are avaiable at his site:\n *  http://www.magic-software.com\n *\n *  @param {Array<Point2D>} e1\n *  @param {Array<Point2D>} e2\n *  @returns {Polynomial}\n */\nIntersection.bezout = function(e1, e2) {\n    const AB = e1[0]*e2[1] - e2[0]*e1[1];\n    const AC = e1[0]*e2[2] - e2[0]*e1[2];\n    const AD = e1[0]*e2[3] - e2[0]*e1[3];\n    const AE = e1[0]*e2[4] - e2[0]*e1[4];\n    const AF = e1[0]*e2[5] - e2[0]*e1[5];\n    const BC = e1[1]*e2[2] - e2[1]*e1[2];\n    const BE = e1[1]*e2[4] - e2[1]*e1[4];\n    const BF = e1[1]*e2[5] - e2[1]*e1[5];\n    const CD = e1[2]*e2[3] - e2[2]*e1[3];\n    const DE = e1[3]*e2[4] - e2[3]*e1[4];\n    const DF = e1[3]*e2[5] - e2[3]*e1[5];\n    const BFpDE = BF + DE;\n    const BEmCD = BE - CD;\n\n    return new Polynomial(\n        AB*BC - AC*AC,\n        AB*BEmCD + AD*BC - 2*AC*AE,\n        AB*BFpDE + AD*BEmCD - AE*AE - 2*AC*AF,\n        AB*DF + AD*BFpDE - 2*AE*AF,\n        AD*DF - AF*AF\n    );\n};\n\nexport default Intersection;\n","/**\n *\n *   IntersectionArgs.js\n *\n *   @copyright 2002, 2017 Kevin Lindsey\n *\n */\n\n/**\n *  IntersectionArgs\n *\n */\nclass IntersectionArgs {\n    /**\n     *  @param {string} name\n     *  @param {Array<Point2D>} args\n     *  @returns {IntersectionArgs}\n     */\n    constructor(name, args) {\n        this.init(name, args);\n    }\n    /**\n     *  init\n     *\n     *  @param {string} name\n     *  @param {Array<Point2D>} args\n     */\n    init(name, args) {\n        this.name = name;\n        this.args = args;\n    }\n}\n\nexport default IntersectionArgs;\n","/**\n *  Shapes\n *\n *  @copyright 2017, Kevin Lindsey\n */\n\nimport {Point2D} from \"kld-affine\";\n\nimport IntersectionArgs from \"./IntersectionArgs.js\";\n\nconst Shapes = {};\n\n/**\n *  quadraticBezier\n *\n *  @param {number} p1x\n *  @param {number} p1y\n *  @param {number} p2x\n *  @param {number} p2y\n *  @param {number} p3x\n *  @param {number} p3y\n *  @returns {IntersectionArgs}\n */\nShapes.quadraticBezier = function(p1x, p1y, p2x, p2y, p3x, p3y) {\n    return new IntersectionArgs(\"Bezier2\", [\n        new Point2D(p1x, p1y),\n        new Point2D(p2x, p2y),\n        new Point2D(p3x, p3y)\n    ]);\n};\n\n\n/**\n *  cubicBezier\n *\n *  @param {number} p1x\n *  @param {number} p1y\n *  @param {number} p2x\n *  @param {number} p2y\n *  @param {number} p3x\n *  @param {number} p3y\n *  @param {number} p4x\n *  @param {number} p4y\n *  @returns {IntersectionArgs}\n */\nShapes.cubicBezier = function(p1x, p1y, p2x, p2y, p3x, p3y, p4x, p4y) {\n    return new IntersectionArgs(\"Bezier3\", [\n        new Point2D(p1x, p1y),\n        new Point2D(p2x, p2y),\n        new Point2D(p3x, p3y),\n        new Point2D(p4x, p4y)\n    ]);\n};\n\n\n/**\n *  circle\n *\n *  @param {number} centerX\n *  @param {number} centerY\n *  @param {number} radius\n *  @returns {IntersectionArgs}\n */\nShapes.circle = function(centerX, centerY, radius) {\n    return new IntersectionArgs(\"Circle\", [\n        new Point2D(centerX, centerY),\n        radius\n    ]);\n};\n\n\n/**\n *  ellipse\n *\n *  @param {number} centerX\n *  @param {number} centerY\n *  @param {number} radiusX\n *  @param {number} radiusY\n *  @returns {IntersectionArgs}\n */\nShapes.ellipse = function(centerX, centerY, radiusX, radiusY) {\n    return new IntersectionArgs(\"Ellipse\", [\n        new Point2D(centerX, centerY),\n        radiusX,\n        radiusY\n    ]);\n};\n\n\n/**\n *  line\n *\n *  @param {number} p1x\n *  @param {number} p1y\n *  @param {number} p2x\n *  @param {number} p2y\n *  @returns {IntersectionArgs}\n */\nShapes.line = function(p1x, p1y, p2x, p2y) {\n    return new IntersectionArgs(\"Line\", [\n        new Point2D(p1x, p1y),\n        new Point2D(p2x, p2y)\n    ]);\n};\n\n\n/**\n *  path\n *\n *  @param {Array<Shapes>} segments\n *  @returns {IntersectionArgs}\n */\nShapes.path = function(segments) {\n    return new IntersectionArgs(\"Path\", segments);\n};\n\n\n/**\n *  polygon\n *\n *  @param {Array<number>} coords\n *  @returns {IntersectionArgs}\n */\nShapes.polygon = function(coords) {\n    const points = [];\n\n    for (let i = 0; i < coords.length; i += 2) {\n        points.push(new Point2D(coords[i], coords[i + 1]));\n    }\n\n    return new IntersectionArgs(\"Polygon\", [points]);\n};\n\n\n/**\n *  polyline\n *\n *  @param {Array<number>} coords\n *  @returns {IntersectionArgs}\n */\nShapes.polyline = function(coords) {\n    const points = [];\n\n    for (let i = 0; i < coords.length; i += 2) {\n        points.push(new Point2D(coords[i], coords[i + 1]));\n    }\n\n    return new IntersectionArgs(\"Polyline\", [points]);\n};\n\n\n/**\n *  rectangle\n *\n *  @param {number} x\n *  @param {number} y\n *  @param {number} width\n *  @param {number} height\n *  @returns {IntersectionArgs}\n */\nShapes.rectangle = function(x, y, width, height) {\n    return new IntersectionArgs(\"Rectangle\", [\n        new Point2D(x, y),\n        new Point2D(x + width, y + height)\n    ]);\n};\n\n\nexport default Shapes;\n","/**\n *  AffineShapes\n *\n *  @copyright 2017, Kevin Lindsey\n */\n\nimport IntersectionArgs from \"./IntersectionArgs.js\";\n\nconst AffineShapes = {};\n\n/**\n *  quadraticBezier\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @param {Point2D} p3\n *  @returns {IntersectionArgs}\n */\nAffineShapes.quadraticBezier = function(p1, p2, p3) {\n    return new IntersectionArgs(\"Bezier2\", [p1, p2, p3]);\n};\n\n\n/**\n *  cubicBezier\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @param {Point2D} p3\n *  @param {Point2D} p4\n *  @returns {IntersectionArgs}\n */\nAffineShapes.cubicBezier = function(p1, p2, p3, p4) {\n    return new IntersectionArgs(\"Bezier3\", [p1, p2, p3, p4]);\n};\n\n\n/**\n *  circle\n *\n *  @param {Point2D} center\n *  @param {number} radius\n *  @returns {IntersectionArgs}\n */\nAffineShapes.circle = function(center, radius) {\n    return new IntersectionArgs(\"Circle\", [center, radius]);\n};\n\n\n/**\n *  ellipse\n *\n *  @param {Point2D} center\n *  @param {number} radiusX\n *  @param {number} radiusY\n *  @returns {IntersectionArgs}\n */\nAffineShapes.ellipse = function(center, radiusX, radiusY) {\n    return new IntersectionArgs(\"Ellipse\", [center, radiusX, radiusY]);\n};\n\n\n/**\n *  line\n *\n *  @param {Point2D} p1\n *  @param {Point2D} p2\n *  @returns {IntersectionArgs}\n */\nAffineShapes.line = function(p1, p2) {\n    return new IntersectionArgs(\"Line\", [p1, p2]);\n};\n\n\n/**\n *  path\n *\n *  @param {Array<AffineShapes>} segments\n *  @returns {IntersectionArgs}\n */\nAffineShapes.path = function(segments) {\n    return new IntersectionArgs(\"Path\", [segments]);\n};\n\n\n/**\n *  polygon\n *\n *  @param {Array<Point2D>} points\n *  @returns {IntersectionArgs}\n */\nAffineShapes.polygon = function(points) {\n    return new IntersectionArgs(\"Polygon\", [points]);\n};\n\n\n/**\n *  polyline\n *\n *  @param {Array<Point2D>} points\n *  @returns {IntersectionArgs}\n */\nAffineShapes.polyline = function(points) {\n    return new IntersectionArgs(\"Polyline\", [points]);\n};\n\n\n/**\n *  rectangle\n *\n *  @param {Point2D} topLeft\n *  @param {Vector2D} size\n *  @returns {IntersectionArgs}\n */\nAffineShapes.rectangle = function(topLeft, size) {\n    return new IntersectionArgs(\"Rectangle\", [topLeft, topLeft.add(size)]);\n};\n\n\nexport default AffineShapes;\n","/**\n *\n *  IntersectionQuery.js\n *\n *  @copyright 2017 Kevin Lindsey\n *\n */\n\nimport {Vector2D} from \"kld-affine\";\n\n/**\n *\n */\nconst IntersectionQuery = {};\n\n\n/**\n *  pointInCircle\n *\n *  @param {Point2D} point\n *  @param {Point2D} center\n *  @param {number} radius\n *  @returns {boolean}\n */\nIntersectionQuery.pointInCircle = function(point, center, radius) {\n    const v = Vector2D.fromPoints(center, point);\n\n    return v.length() <= radius;\n};\n\n\n/**\n *  pointInEllipse\n *\n *  @param {Point2D} point\n *  @param {Point2D} center\n *  @param {number} radiusX\n *  @param {number} radiusY\n *  @returns {boolean}\n */\nIntersectionQuery.pointInEllipse = function(point, center, radiusX, radiusY) {\n    const len = point.subtract(center);\n\n    return (len.x * len.x) / (radiusX * radiusX) + (len.y * len.y) / (radiusY * radiusY) <= 1;\n};\n\n\n/**\n *  pointInPolyline\n *\n *  @param {Point2D} point\n *  @param {Array<Point2D>} points\n */\nIntersectionQuery.pointInPolyline = function(point, points) {\n    const {length: len} = points;\n    let counter = 0;\n    let xInter;\n\n    let p1 = points[0];\n\n    for (let i = 1; i <= len; i++) {\n        const p2 = points[i % len];\n        const minY = Math.min(p1.y, p2.y);\n        const maxY = Math.max(p1.y, p2.y);\n        const maxX = Math.max(p1.x, p2.x);\n\n        if (p1.y !== p2.y && minY < point.y && point.y <= maxY && point.x <= maxX) {\n            xInter = (point.y - p1.y) * (p2.x - p1.x) / (p2.y - p1.y) + p1.x;\n\n            if (p1.x === p2.x || point.x <= xInter) {\n                counter++;\n            }\n        }\n\n        p1 = p2;\n    }\n\n    return (counter % 2 === 1);\n};\n\n\n/**\n *  pointInPolyline\n *\n *  @param {Point2D} point\n *  @param {Array<Point2D>} points\n */\nIntersectionQuery.pointInPolygon = IntersectionQuery.pointInPolyline;\n\n\n/**\n *  pointInRectangle\n *\n *  @param {Point2D} point\n *  @param {Point2D} topLeft\n *  @param {Point2D} bottomRight\n *  @returns {boolean}\n */\nIntersectionQuery.pointInRectangle = function(point, topLeft, bottomRight) {\n    return (\n        topLeft.x <= point.x && point.x < bottomRight.x &&\n        topLeft.y <= point.y && point.y < bottomRight.y\n    );\n};\n\n\nexport default IntersectionQuery;\n"],"names":["Point2D","x","y","Object","defineProperties","this","value","undefined","writable","enumerable","configurable","prototype","clone","constructor","add","that","subtract","multiply","scalar","divide","equals","precisionEquals","precision","Math","abs","lerp","t","omt","distanceFrom","dx","dy","sqrt","min","max","transform","matrix","a","c","e","b","d","f","toString","module","Vector2D","fromPoints","p1","p2","length","magnitude","dot","cross","determinant","unit","angleBetween","cos","radians","acos","perp","perpendicular","project","percent","setReadonlyProperty","object","property","defineProperty","Matrix2D","IDENTITY","translation","tx","ty","scaling","scale","scalingAt","center","nonUniformScaling","scaleX","scaleY","nonUniformScalingAt","rotation","s","sin","rotationAt","rotationFromVector","vector","xFlip","yFlip","xSkew","tan","ySkew","isIdentity","inverse","det1","idet","det2","det3","translate","scaleAt","scaleNonUniform","scaleNonUniformAt","rotate","rotateAt","cx","cy","rotateFromVector","flipX","flipY","skewX","skewY","isInvertible","getScale","getDecomposition","E","F","G","H","Q","R","a1","atan2","a2","theta","phi","rotation0","join","require","Polynomial","init","arguments","TOLERANCE","ACCURACY","interpolate","xs","ys","n","offset","Array","Error","isNaN","ns","diff","i","dift","m","ho","hp","w","den","coefs","push","_variable","_s","eval","result","d1","getDegree","d2","dmax","v1","v2","j","divide_scalar","simplify","pop","bisection","minValue","maxValue","tmp1","log","tmp2","LN10","iters","ceil","LN2","signs","round","sign","trapezoid","range","it","delta","sum","simpson","st","os","ost","romberg","MAX","h","getDerivative","derivative","getRoots","getLinearRoot","getQuadraticRoots","getCubicRoots","getQuarticRoots","getRootsInInterval","root","roots","droots","results","c3","c2","c1","discrim","halfB","ZEROepsilon","zeroErrorEstimate","tmp","pow","distance","angle","sqrt3","NaN","poly","slice","poly_d","derrt","sort","dery","nr","rb","bounds","maxabsX","minX","maxX","guesses","minmax","df","newton_secant_bisection","concat","an","reduce","v","nm","bounds_UpperReal_Fujiwara","map","coefSelectionFunc","find2Max","acc","bi","nearmax","max_nearmax_pos","negX","posX","bounds_LowerReal_Fujiwara","reverse","res","urb","x0","max_iterations","dfx","x_correction","x_new","y_atmin","y_atmax","prev_dfx","prev_x_ef_correction","min_correction_factor","isBounded","isEnoughCorrection","SqrtPolynomial","VERSION","superclass","call","isNullish","o","closePolygon","points","copy","Intersection","status","point","intersect","shape1","shape2","name","intersectPathShape","method","args","apply","path","shape","segment","inter","appendPoints","intersectBezier2Bezier2","a3","b1","b2","b3","c12","c11","c10","c22","c21","c20","g","xp","xRoots","yp","yRoots","checkRoots","xRoot","k","intersectBezier2Bezier3","b4","c23","c10x2","c10y2","c11x2","c11y2","c12x2","c12y2","c20x2","c20y2","c21x2","c21y2","c22x2","c22y2","c23x2","c23y2","intersectBezier2Circle","p3","r","intersectBezier2Ellipse","ec","rx","ry","c0","rxrx","ryry","intersectBezier2Line","cl","p4","p5","p6","appendPoint","intersectBezier2Polygon","intersectBezier2Polyline","len","intersectBezier2Rectangle","r1","r2","topRight","bottomLeft","inter1","inter2","inter3","inter4","intersectBezier3Bezier3","a4","c13","e0","e1","e2","e3","f0","f1","f2","f3","g0","g1","g2","g3","h0","h1","h2","h3","i0","i1","i2","i3","intersectBezier3Circle","intersectBezier3Ellipse","intersectBezier3Line","p7","p8","p9","p10","intersectBezier3Polygon","intersectBezier3Polyline","intersectBezier3Rectangle","intersectCircleCircle","r_max","r_min","c_dist","p","intersectCircleEllipse","cc","intersectEllipseEllipse","intersectCircleLine","deter","u1","u2","intersectCirclePolygon","intersectCirclePolyline","intersectCircleRectangle","rx1","ry1","rx2","ry2","bezout","norm0","norm1","tst","intersectEllipseLine","orign","dir","mDir","mDiff","t_a","t_b","intersectEllipsePolygon","intersectEllipsePolyline","intersectEllipseRectangle","intersectLineLine","ua_t","ub_t","u_b","ua","ub","intersectLinePolygon","intersectLinePolyline","intersectLineRectangle","intersectPolygonPolygon","points1","points2","intersectPolylinePolyline","intersectPolygonPolyline","intersectPolygonRectangle","intersectPolylineRectangle","intersectRectangleRectangle","intersectRayRay","AB","AC","AD","AE","AF","BC","BE","BF","CD","DE","DF","BFpDE","BEmCD","IntersectionArgs","Shapes","p1x","p1y","p2x","p2y","p3x","p3y","p4x","p4y","centerX","centerY","radius","radiusX","radiusY","segments","coords","width","height","AffineShapes","topLeft","size","IntersectionQuery","xInter","counter","minY","maxY","pointInPolygon","pointInPolyline","pointInRectangle","bottomRight"],"mappings":"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"}