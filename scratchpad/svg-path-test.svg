<?xml version="1.0"?>
<svg
    xmlns="http://www.w3.org/2000/svg" version="1.1"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    onload="go(evt)">

    <defs>
        <script type="text/javascript" xlink:href="../dist/index-umd.js"/>
        <script type="text/javascript"><![CDATA[
            var {SvgShapes, Intersection} = KldIntersections;

            function go() {
                const shape1 = makeShape("a");
                const shape2 = makeShape("b");
                const result = Intersection.intersect(shape1, shape2);

                const xml = result.points.map(point => {
                    return `<circle cx="${point.x}" cy="${point.y}" r="2" stroke="red" fill="none"/>`
                }).join("\n");

                document.getElementById("result").innerHTML = xml;
            }

            function makeShape(id) {
                return SvgShapes.element(document.getElementById(id));
            }
        ]]></script>
    </defs>

    <!--d="M40,70 Q50,150 90,90 T135,130 L160,70 C180,180 280,55 280,140 S400,110 290,100"-->
    <path id="a"
          d="M40,70 q10,80 50,20 t45,40 l25,-60 c20,110 120,-15 120,70 s120,-30 10,-40"
          stroke="blue" stroke-width="5" fill="none" opacity="0.5"/>
    <line id="b"
          x1="15" y1="75" x2="355" y2="140"
          stroke="orange" stroke-width="5" opacity="0.5"/>
    <g id="result"></g>
</svg>
